(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{28:function(e,t,a){e.exports=a(52)},43:function(e,t,a){},50:function(e,t,a){},52:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),s=a(24),c=a.n(s),o=a(55),l=(a(33),a(35),a(38),a(1)),i=a(2),m=a(3),u=a(5),d=a(4),h=a(6),p=a(56),f=a(54),E=a(57),g=function(e){var t=e.type,a=e.message,n=e.handlerCloseAlert,s=function(e){e.preventDefault(),n()};switch(console.log(t,a),t){case"warnig":return r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"alert alert-warning fade show mt-3",role:"alert",style:{zIndex:"1000"}},r.a.createElement("span",null,a),r.a.createElement("button",{type:"button",className:"close","data-dismiss":"alert","aria-label":"Close",onClick:s},r.a.createElement("span",{"aria-hidden":"true"},"\xd7"))));case"success":return r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"alert alert-success fade show mt-3",role:"alert",style:{zIndex:"1000"}},r.a.createElement("span",null,a),r.a.createElement("button",{type:"button",className:"close","data-dismiss":"alert","aria-label":"Close",onClick:s},r.a.createElement("span",{"aria-hidden":"true"},"\xd7"))));default:return r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"alert alert-warning fade show mt-3",role:"alert",style:{zIndex:"1000"}},r.a.createElement("span",null,a),r.a.createElement("button",{type:"button",className:"close","data-dismiss":"alert","aria-label":"Close",onClick:s},r.a.createElement("span",{"aria-hidden":"true"},"\xd7"))))}},b=function(e){var t,a,n=e.handlerLogin,s=e.handlerCloseAlert;return r.a.createElement("div",{style:{minHeight:"480px"}},e.alert&&r.a.createElement(g,{type:e.alert.type,message:e.alert.message,handlerCloseAlert:s}),r.a.createElement("div",{className:"bg-light d-flex align-items-center",style:{position:"absolute",top:"0",left:"0",right:"0",bottom:"0"}},r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"row justify-content-center"},r.a.createElement("div",{className:"col-12 col-sm-12 col-md-8 col-md-offset-2 col-lg-6 col-lg-offset-3"},r.a.createElement("div",{className:"text-center font-weight-bold mb-5"},r.a.createElement("h3",null,"\u0423\u0447\u0435\u0442 \u044d\u043b\u0435\u043a\u0442\u0440\u043e\u044d\u043d\u0435\u0440\u0433\u0438\u0438")),r.a.createElement("form",{className:""},r.a.createElement("div",{className:"form-group"},r.a.createElement("input",{type:"text",className:"form-control",placeholder:"\u0418\u043c\u044f \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f",required:!0,autoFocus:!0,ref:function(e){return t=e}})),r.a.createElement("div",{className:"form-group"},r.a.createElement("input",{type:"password",className:"form-control",placeholder:"\u041f\u0430\u0440\u043e\u043b\u044c",required:!0,ref:function(e){return a=e}})),r.a.createElement("div",null,r.a.createElement("button",{className:"btn btn-primary btn-block",onClick:function(e){e.preventDefault(),n(t.value,a.value)}},"\u0412\u0445\u043e\u0434"))))))),r.a.createElement("div",{className:"fixed-bottom mb-3",style:{position:"absolute",bottom:"0"}},r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"row justify-content-center"},r.a.createElement("div",{className:"col-12 text-center"},r.a.createElement("span",{className:"text-muted"},r.a.createElement("a",{className:"text-muted",href:"http://instaservice.by"},"instaservice.by")," \xa9 2019"))))))},v=a(7),N=a.n(v),w=a(17),j={login:function(e,t){var a={login:e,password:t},n={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)};return N()("/api/v1/auth/login",n).then(function(e){var t=e.json();return e.ok?t:t.then(function(e){throw e})})},getAllUsers:function(e){var t={method:"GET",headers:{"Content-Type":"application/json",Authorization:"BEARER ".concat(e)}};return N()("/api/v1/users",t).then(function(e){var t=e.json();return e.ok?t:t.then(function(e){throw e})})},changeUserPassword:function(e,t,a){var n={password:a},r={method:"PUT",headers:{"Content-Type":"application/json",Authorization:"BEARER ".concat(e)},body:JSON.stringify(n)},s="/api/v1/users/".concat(t,"/changePassword");return N()(s,r).then(function(e){var t=e.json();return e.ok?t:t.then(function(e){throw e})})},getAllInspectors:function(e,t,a){var n={method:"GET",headers:{"Content-Type":"application/json",Authorization:"BEARER ".concat(e)}},r="/api/v1/inspectors?limit=".concat(t,"&offset=").concat(a);return N()(r,n).then(function(e){var t=e.json();return e.ok?t:t.then(function(e){throw e})})},getCountInspectors:function(e){var t={method:"GET",headers:{"Content-Type":"application/json",Authorization:"BEARER ".concat(e)}};return N()("/api/v1/inspectors/count",t).then(function(e){var t=e.json();return e.ok?t:t.then(function(e){throw e})})},createInspector:function(e,t,a,n){var r={login:t,password:a,name:n},s={method:"POST",headers:{"Content-Type":"application/json",Authorization:"BEARER ".concat(e)},body:JSON.stringify(r)};return N()("/api/v1/inspectors",s).then(function(e){var t=e.json();return e.ok?t:t.then(function(e){throw e})})},getInspectorById:function(e,t){var a={method:"GET",cache:"no-cache",headers:{"Content-Type":"application/json",Authorization:"BEARER ".concat(e)}},n="/api/v1/inspectors/".concat(t);return N()(n,a).then(function(e){var t=e.json();return console.log(t),e.ok?t:t.then(function(e){throw e})})},getInspectorByUserId:function(e,t){var a={method:"GET",headers:{"Content-Type":"application/json",Authorization:"BEARER ".concat(e)}},n="/api/v1/inspectors/user/".concat(t);return N()(n,a).then(function(e){var t=e.json();return console.log(t),e.ok?t:t.then(function(e){throw e})})},updateInspectorById:function(e,t,a){var n={name:a},r={method:"PUT",headers:{"Content-Type":"application/json",Authorization:"BEARER ".concat(e)},body:JSON.stringify(n)},s="/api/v1/inspectors/".concat(t);return N()(s,r).then(function(e){var t=e.json();return e.ok?t:t.then(function(e){throw e})})},deleteInspectorById:function(e,t){var a={method:"DELETE",headers:{"Content-Type":"application/json",Authorization:"BEARER ".concat(e)}},n="/api/v1/inspectors/".concat(t);return N()(n,a).then(function(e){var t=e.json();return e.ok?t:t.then(function(e){throw e})})},getAllConsumers:function(e,t,a){var n={method:"GET",headers:{"Content-Type":"application/json",Authorization:"BEARER ".concat(e)}},r=[];t&&r.push("limit=".concat(t)),isNaN(a)||r.push("offset=".concat(a));var s="/api/v1/consumers?".concat(r.join("&"));return N()(s,n).then(function(e){var t=e.json();return e.ok?t:t.then(function(e){throw e})})},getCountConsumers:function(e){var t={method:"GET",headers:{"Content-Type":"application/json",Authorization:"BEARER ".concat(e)}};return N()("/api/v1/consumers/count",t).then(function(e){var t=e.json();return e.ok?t:t.then(function(e){throw e})})},createConsumer:function(e,t,a,n,r,s){var c={login:t,password:a,name:n,email:r,phone:s},o={method:"POST",headers:{"Content-Type":"application/json",Authorization:"BEARER ".concat(e)},body:JSON.stringify(c)};return N()("/api/v1/consumers",o).then(function(e){var t=e.json();return e.ok?t:t.then(function(e){throw e})})},getConsumerById:function(e,t){var a={method:"GET",headers:{"Content-Type":"application/json",Authorization:"BEARER ".concat(e)}},n="/api/v1/consumers/".concat(t);return N()(n,a).then(function(e){var t=e.json();return e.ok?t:t.then(function(e){throw e})})},updateConsumerById:function(e,t,a,n,r){var s={name:a,email:n,phone:r},c={method:"PUT",headers:{"Content-Type":"application/json",Authorization:"BEARER ".concat(e)},body:JSON.stringify(s)},o="/api/v1/consumers/".concat(t);return N()(o,c).then(function(e){var t=e.json();return e.ok?t:t.then(function(e){throw e})})},deleteConsumerById:function(e,t){var a={method:"DELETE",headers:{"Content-Type":"application/json",Authorization:"BEARER ".concat(e)}},n="/api/v1/consumers/".concat(t);return N()(n,a).then(function(e){var t=e.json();return e.ok?t:t.then(function(e){throw e})})},getAllMeters:function(e,t,a){var n={method:"GET",headers:{"Content-Type":"application/json",Authorization:"BEARER ".concat(e)}},r="/api/v1/meters?limit=".concat(t,"&offset=").concat(a);return N()(r,n).then(function(e){var t=e.json();return e.ok?t:t.then(function(e){throw e})})},getCountMeters:function(e){var t={method:"GET",headers:{"Content-Type":"application/json",Authorization:"BEARER ".concat(e)}};return N()("/api/v1/meters/count",t).then(function(e){var t=e.json();return e.ok?t:t.then(function(e){throw e})})},getAllMetersNotInPlace:function(e){var t={method:"GET",headers:{"Content-Type":"application/json",Authorization:"BEARER ".concat(e)}};return N()("/api/v1/meters/notInPlace",t).then(function(e){var t=e.json();return e.ok?t:t.then(function(e){throw e})})},createMeter:function(e,t){var a={number:t},n={method:"POST",headers:{"Content-Type":"application/json",Authorization:"BEARER ".concat(e)},body:JSON.stringify(a)};return N()("/api/v1/meters",n).then(function(e){var t=e.json();return e.ok?t:t.then(function(e){throw e})})},getMeterById:function(e,t){var a={method:"GET",headers:{"Content-Type":"application/json",Authorization:"BEARER ".concat(e)}},n="/api/v1/meters/".concat(t);return N()(n,a).then(function(e){var t=e.json();return e.ok?t:t.then(function(e){throw e})})},updateMeterById:function(e,t,a){var n={number:a},r={method:"PUT",headers:{"Content-Type":"application/json",Authorization:"BEARER ".concat(e)},body:JSON.stringify(n)},s="/api/v1/meters/".concat(t);return N()(s,r).then(function(e){var t=e.json();return e.ok?t:t.then(function(e){throw e})})},deleteMeterById:function(e,t){var a={method:"DELETE",headers:{"Content-Type":"application/json",Authorization:"BEARER ".concat(e)}},n="/api/v1/meters/".concat(t);return N()(n,a).then(function(e){var t=e.json();return e.ok?t:t.then(function(e){throw e})})},getCountPlaces:function(e){var t={method:"GET",headers:{"Content-Type":"application/json",Authorization:"BEARER ".concat(e)}};return N()("/api/v1/places/count",t).then(function(e){var t=e.json();return e.ok?t:t.then(function(e){throw e})})},getAllPlaces:function(e,t,a){var n={method:"GET",headers:{"Content-Type":"application/json",Authorization:"BEARER ".concat(e)}},r="/api/v1/places?limit=".concat(t,"&offset=").concat(a);return N()(r,n).then(function(e){var t=e.json();return e.ok?t:t.then(function(e){throw e})})},getAllPlacesForAudit:function(e){var t={method:"GET",headers:{"Content-Type":"application/json",Authorization:"BEARER ".concat(e)}};return N()("/api/v1/places/audit",t).then(function(e){var t=e.json();return e.ok?t:t.then(function(e){throw e})})},createPlace:function(e,t,a,n,r){var s={name:t,isSignNeed:a,consumer_id:n,meter_id:r},c={method:"POST",headers:{"Content-Type":"application/json",Authorization:"BEARER ".concat(e)},body:JSON.stringify(s)};return N()("/api/v1/places",c).then(function(e){var t=e.json();return e.ok?t:t.then(function(e){throw e})})},getPlaceById:function(e,t){var a={method:"GET",headers:{"Content-Type":"application/json",Authorization:"BEARER ".concat(e)}},n="/api/v1/places/".concat(t);return N()(n,a).then(function(e){var t=e.json();return e.ok?t:t.then(function(e){throw e})})},updatePlaceById:function(e,t,a,n,r,s){var c={name:a,isSignNeed:n,consumer_id:r,meter_id:s},o={method:"PUT",headers:{"Content-Type":"application/json",Authorization:"BEARER ".concat(e)},body:JSON.stringify(c)},l="/api/v1/places/".concat(t);return N()(l,o).then(function(e){var t=e.json();return e.ok?t:t.then(function(e){throw e})})},deletePlaceById:function(e,t){var a={method:"DELETE",headers:{"Content-Type":"application/json",Authorization:"BEARER ".concat(e)}},n="/api/v1/places/".concat(t);return N()(n,a).then(function(e){var t=e.json();return e.ok?t:t.then(function(e){throw e})})},getAllReports:function(e,t,a){var n={method:"GET",headers:{"Content-Type":"application/json",Authorization:"BEARER ".concat(e)}},r="/api/v1/reports?limit=".concat(t,"&offset=").concat(a);return N()(r,n).then(function(e){var t=e.json();return e.ok?t:t.then(function(e){throw e})})},getCountReports:function(e,t){var a={method:"GET",headers:{"Content-Type":"application/json",Authorization:"BEARER ".concat(e)}},n="/api/v1/reports/count?inspector_id=".concat(t||"");return N()(n,a).then(function(e){var t=e.json();return e.ok?t:t.then(function(e){throw e})})},getReportById:function(e,t){var a={method:"GET",headers:{"Content-Type":"application/json",Authorization:"BEARER ".concat(e)}},n="/api/v1/reports/".concat(t);return N()(n,a).then(function(e){var t=e.json();return e.ok?t:t.then(function(e){throw e})})},getReportByIdPdf:function(e,t){var a={method:"GET",headers:{"Content-Type":"application/pdf",Authorization:"BEARER ".concat(e)},responseType:"blob"},n="/api/v1/reports/".concat(t,"/pdf");return N()(n,a).then(function(e){return e.blob()}).then(function(e){return Object(w.saveAs)(e,"report-".concat(Date.now(),".pdf"))})},getAllReportsByInspectorId:function(e,t,a,n){var r={method:"GET",headers:{"Content-Type":"application/json",Authorization:"BEARER ".concat(e)}},s="/api/v1/reports?inspector_id=".concat(t,"&limit=").concat(a,"&offset=").concat(n);return N()(s,r).then(function(e){var t=e.json();return e.ok?t:t.then(function(e){throw e})})},createReport:function(e,t,a,n,r,s){var c={inspector_id:t,place_id:a,sign_id:n,date:r,value:s},o={method:"POST",headers:{"Content-Type":"application/json",Authorization:"BEARER ".concat(e)},body:JSON.stringify(c)};return N()("/api/v1/reports",o).then(function(e){var t=e.json();return e.ok?t:t.then(function(e){throw e})})},updateReportById:function(e,t,a){var n={value:a},r={method:"PUT",headers:{"Content-Type":"application/json",Authorization:"BEARER ".concat(e)},body:JSON.stringify(n)},s="/api/v1/reports/".concat(t);return N()(s,r).then(function(e){var t=e.json();return e.ok?t:t.then(function(e){throw e})})},deleteReportById:function(e,t){var a={method:"DELETE",headers:{"Content-Type":"application/json",Authorization:"BEARER ".concat(e)}},n="/api/v1/reports/".concat(t);return N()(n,a).then(function(e){var t=e.json();return e.ok?t:t.then(function(e){throw e})})},getAllDataByMeterId:function(e,t,a,n){var r={method:"GET",headers:{"Content-Type":"application/json",Authorization:"BEARER ".concat(e)}},s="/api/v1/data?meter_id=".concat(t||"","&offset=").concat(n,"&limit=").concat(a);return N()(s,r).then(function(e){var t=e.json();return e.ok?t:t.then(function(e){throw e})})},getCountDatas:function(e,t){var a={method:"GET",headers:{"Content-Type":"application/json",Authorization:"BEARER ".concat(e)}},n="/api/v1/data/count?meter_id=".concat(t||"");return N()(n,a).then(function(e){var t=e.json();return e.ok?t:t.then(function(e){throw e})})},createData:function(e,t,a,n){var r={date:a,value:n,meter_id:t},s={method:"POST",headers:{"Content-Type":"application/json",Authorization:"BEARER ".concat(e)},body:JSON.stringify(r)};return N()("/api/v1/data",s).then(function(e){var t=e.json();return e.ok?t:t.then(function(e){throw e})})},createSign:function(e,t){var a=new FormData;a.append("sign",t,"sing-".concat(Date.now(),".png"));var n={method:"POST",headers:{Authorization:"BEARER ".concat(e)},body:a};return N()("/api/v1/signs",n).then(function(e){var t=e.json();return e.ok?t:t.then(function(e){throw e})})},deleteSignById:function(e,t){var a={method:"DELETE",headers:{"Content-Type":"application/json",Authorization:"BEARER ".concat(e)}},n="/api/v1/signs/".concat(t);return N()(n,a).then(function(e){var t=e.json();return e.ok?t:t.then(function(e){throw e})})},sendReport:function(e,t){var a={method:"GET",headers:{"Content-Type":"application/json",Authorization:"BEARER ".concat(e)}},n="/api/v1/reports/".concat(t,"/sendEmail");return N()(n,a).then(function(e){var t=e.json();return e.ok?t:t.then(function(e){throw e})})},getAllRegisters:function(e){var t={method:"GET",headers:{"Content-Type":"application/json",Authorization:"BEARER ".concat(e)}};return N()("/api/v1/registers",t).then(function(e){var t=e.json();return e.ok?t:t.then(function(e){throw e})})},createRegister:function(e,t,a,n){console.log(t,a,n);var r={name:t,group_abonent_id:a,sub_abonentes:n},s={method:"POST",headers:{"Content-Type":"application/json",Authorization:"BEARER ".concat(e)},body:JSON.stringify(r)};return N()("/api/v1/registers",s).then(function(e){var t=e.json();return e.ok?t:t.then(function(e){throw e})})},getRegisterById:function(e,t){var a={method:"GET",headers:{"Content-Type":"application/json",Authorization:"BEARER ".concat(e)}},n="/api/v1/registers/".concat(t);return N()(n,a).then(function(e){var t=e.json();return e.ok?t:t.then(function(e){throw e})})},updateRegisterById:function(e,t,a,n,r){console.log(a,n,r);var s={name:a,group_abonent_id:n,sub_abonentes:r},c={method:"PUT",headers:{"Content-Type":"application/json",Authorization:"BEARER ".concat(e)},body:JSON.stringify(s)},o="/api/v1/registers/".concat(t);return N()(o,c).then(function(e){var t=e.json();return e.ok?t:t.then(function(e){throw e})})},deleteRegisterById:function(e,t){var a={method:"DELETE",headers:{"Content-Type":"application/json",Authorization:"BEARER ".concat(e)}},n="/api/v1/registers/".concat(t);return N()(n,a).then(function(e){var t=e.json();return e.ok?t:t.then(function(e){throw e})})},downloadXlsxRegisterById:function(e,t){var a={method:"GET",headers:{"Content-Type":"application/xlsx",Authorization:"BEARER ".concat(e)},responseType:"blob"},n="/api/v1/registers/".concat(t,"/xlsx");return N()(n,a).then(function(e){return e.blob()}).then(function(e){return Object(w.saveAs)(e,"register-".concat(Date.now(),".xlsx"))})},downloadXlsxAllRegisters:function(e){var t={method:"GET",headers:{"Content-Type":"application/xlsx",Authorization:"BEARER ".concat(e)},responseType:"blob"};return N()("/api/v1/registers/xlsx",t).then(function(e){return e.blob()}).then(function(e){return Object(w.saveAs)(e,"register-".concat(Date.now(),".xlsx"))})},act_01:{getAll:function(e,t,a){var n={method:"GET",headers:{"Content-Type":"application/json",Authorization:"BEARER ".concat(e)}},r="/api/v1/doc/act_01?limit=".concat(t,"&offset=").concat(a);return N()(r,n).then(function(e){var t=e.json();return e.ok?t:t.then(function(e){throw e})})},count:function(e,t){var a={method:"GET",headers:{"Content-Type":"application/json",Authorization:"BEARER ".concat(e)}},n="/api/v1/doc/act_01/count?inspector_id=".concat(t||"");return N()(n,a).then(function(e){var t=e.json();return e.ok?t:t.then(function(e){throw e})})},getById:function(e,t){var a={method:"GET",headers:{"Content-Type":"application/json",Authorization:"BEARER ".concat(e)}},n="/api/v1/doc/act_01/".concat(t);return N()(n,a).then(function(e){var t=e.json();return e.ok?t:t.then(function(e){throw e})})},getPdfById:function(e,t){var a={method:"GET",headers:{"Content-Type":"application/pdf",Authorization:"BEARER ".concat(e)},responseType:"blob"},n="/api/v1/doc/act_01/".concat(t,"/pdf");return N()(n,a).then(function(e){return e.blob()}).then(function(e){return Object(w.saveAs)(e,"act-".concat(Date.now(),".pdf"))})},getAllByInspectorId:function(e,t,a,n){var r={method:"GET",headers:{"Content-Type":"application/json",Authorization:"BEARER ".concat(e)}},s="/api/v1/doc/act_01?inspector_id=".concat(t,"&limit=").concat(a,"&offset=").concat(n);return N()(s,r).then(function(e){var t=e.json();return e.ok?t:t.then(function(e){throw e})})},create:function(e,t,a,n,r,s,c,o){var l={inspector:t,consumer:a,place:n,meter:r,sign_id:s,date:c,value:o},i={method:"POST",headers:{"Content-Type":"application/json",Authorization:"BEARER ".concat(e)},body:JSON.stringify(l)};return N()("/api/v1/doc/act_01",i).then(function(e){var t=e.json();return e.ok?t:t.then(function(e){throw e})})},updateById:function(e,t,a){var n={value:a},r={method:"PUT",headers:{"Content-Type":"application/json",Authorization:"BEARER ".concat(e)},body:JSON.stringify(n)},s="/api/v1/doc/act_01/".concat(t);return N()(s,r).then(function(e){var t=e.json();return e.ok?t:t.then(function(e){throw e})})},deletetById:function(e,t){var a={method:"DELETE",headers:{"Content-Type":"application/json",Authorization:"BEARER ".concat(e)}},n="/api/v1/doc/act_01/".concat(t);return N()(n,a).then(function(e){var t=e.json();return e.ok?t:t.then(function(e){throw e})})},sendEmailById:function(e,t){var a={method:"GET",headers:{"Content-Type":"application/json",Authorization:"BEARER ".concat(e)}},n="/api/v1/doc/act_01/".concat(t,"/sendEmail");return N()(n,a).then(function(e){var t=e.json();return e.ok?t:t.then(function(e){throw e})})}}},y=a(53),k=function(e){return r.a.createElement("nav",{className:"nav my-2"},r.a.createElement(y.a,{className:"nav-link",to:"/back",onClick:function(t){t.preventDefault(),e.history.goBack()}},"\u041d\u0430\u0437\u0430\u0434"),e.children)},O=function(e){var t,a,n=e.user;return n?r.a.createElement("div",{className:"container"},r.a.createElement(k,e),r.a.createElement("div",{className:"row justify-content-center"},r.a.createElement("div",{className:"col-12 col-sm-12 col-md-8 col-md-offset-2 col-lg-6 col-lg-offset-3"},r.a.createElement("div",{className:"text-center font-weight-bold mb-5"},r.a.createElement("h3",null,"\u0421\u043c\u0435\u043d\u0430 \u043f\u0430\u0440\u043e\u043b\u044f")),r.a.createElement("form",null,r.a.createElement("div",{className:"form-group"},r.a.createElement("input",{className:"form-control",type:"password",placeholder:"\u041d\u043e\u0432\u044b\u0439 \u043f\u0430\u0440\u043e\u043b\u044c",required:!0,ref:function(e){return t=e}})),r.a.createElement("div",{className:"form-group"},r.a.createElement("input",{className:"form-control",type:"password",placeholder:"\u041f\u043e\u0434\u0442\u0432\u0435\u0440\u0434\u0438\u0442\u044c \u043f\u0430\u0440\u043e\u043b\u044c",required:!0,ref:function(e){return a=e}})),r.a.createElement("div",{className:"form-group"},r.a.createElement("button",{className:"btn btn-primary btn-block",onClick:function(r){r.preventDefault(),t.value===a.value?j.changeUserPassword(n.token,n.id,t.value).then(function(t){t?(e.showSuccessAlert("\u041f\u0430\u0440\u043e\u043b\u044c \u0438\u0437\u043c\u0435\u043d\u0435\u043d"),e.history.goBack()):e.showWarningAlert("\u041d\u0435\u0443\u0434\u0430\u043b\u043e\u0441\u044c \u0438\u0437\u043c\u0435\u043d\u0438\u0442\u044c \u043f\u0430\u0440\u043e\u043b\u044c")}).catch(function(t){var a=t.error;e.showWarningAlert(a.message)}):e.showWarningAlert("\u041f\u0430\u0440\u043e\u043b\u0438 \u043d\u0435 \u0441\u043e\u0432\u043f\u0430\u0434\u0430\u044e\u0442")}},"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c")))))):null},C=function(e){var t=e.user,a=e.handlerLogout;return r.a.createElement("div",null,r.a.createElement("nav",{className:"navbar navbar-expand-lg navbar-dark bg-dark"},r.a.createElement("div",{className:"container"},r.a.createElement(y.a,{className:"navbar-brand",to:"/owner/user"},r.a.createElement("span",null,t.login)," ",r.a.createElement("i",{className:"fas fa-user-tie"})),r.a.createElement("button",{className:"navbar-toggler",type:"button","data-toggle":"collapse","data-target":"#navbarNav","aria-controls":"navbarNav","aria-expanded":"false","aria-label":"Toggle navigation"},r.a.createElement("span",{className:"navbar-toggler-icon"})),r.a.createElement("div",{className:"collapse navbar-collapse",id:"navbarNav"},r.a.createElement("ul",{className:"navbar-nav"},r.a.createElement("li",{className:"nav-item"},r.a.createElement(y.a,{className:"nav-link",to:"/owner/inspectors"},"\u0418\u043d\u0441\u043f\u0435\u043a\u0442\u043e\u0440\u044b")),r.a.createElement("li",{className:"nav-item"},r.a.createElement(y.a,{className:"nav-link",to:"/owner/consumers"},"\u041f\u043e\u0442\u0440\u0435\u0431\u0438\u0442\u0435\u043b\u0438")),r.a.createElement("li",{className:"nav-item"},r.a.createElement(y.a,{className:"nav-link",to:"/owner/meters"},"\u0421\u0447\u0435\u0442\u0447\u0438\u043a\u0438")),r.a.createElement("li",{className:"nav-item"},r.a.createElement(y.a,{className:"nav-link",to:"/owner/places"},"\u041c\u0435\u0441\u0442\u0430")),r.a.createElement("li",{className:"nav-item"},r.a.createElement(y.a,{className:"nav-link",to:"/owner/reports"},"\u041e\u0442\u0447\u0435\u0442\u044b")),r.a.createElement("li",{className:"nav-item"},r.a.createElement(y.a,{className:"nav-link",to:"/owner/registers"},"\u0420\u0435\u0435\u0441\u0442\u0440\u044b")),r.a.createElement("li",{className:"nav-item"},r.a.createElement(y.a,{className:"nav-link text-warning",to:"/logout",onClick:function(e){e.preventDefault(),a()}},"\u0412\u044b\u0445\u043e\u0434")))))))},x=(a(43),function(e){return r.a.createElement("footer",{className:"footer bg-dark text-white py-2"},r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"row justify-content-center"},r.a.createElement("div",{className:"col-12 text-center"},r.a.createElement("span",{className:"text-muted"},r.a.createElement("a",{className:"text-muted",href:"http://instaservice.by"},"instaservice.by")," \xa9 2019")))))}),A=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(u.a)(this,Object(d.a)(t).call(this,e))).handlerCloseAlert=function(){a.setState(Object(l.a)({},a.state,{alert:null}))},a.setAlert=function(e,t){a.setState(Object(l.a)({},a.state,{alert:{type:e,message:t}}))},a.showWarningAlert=function(e){a.setState(Object(l.a)({},a.state,{alert:{type:"warning",message:e}}))},a.showSuccessAlert=function(e){a.setState(Object(l.a)({},a.state,{alert:{type:"success",message:e}}))},a.state={user:e.user,alert:null},a}return Object(h.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){var e=this,t=this.state.user;return console.log("OWNER",t),r.a.createElement("div",null,r.a.createElement(C,{user:t,handlerLogout:this.props.handlerLogout}),this.state.alert&&r.a.createElement(g,{type:this.state.alert.type,message:this.state.alert.message,handlerCloseAlert:this.handlerCloseAlert}),this.props.children&&r.a.Children.map(this.props.children,function(t){return r.a.cloneElement(t,{setAlert:e.setAlert,showWarningAlert:e.showWarningAlert,showSuccessAlert:e.showSuccessAlert})}),r.a.createElement(x,null))}}]),t}(n.Component),L=Object(E.a)(A),S=function(e){return e.user?r.a.createElement("div",{className:"container"},r.a.createElement(k,e,r.a.createElement(y.a,{className:"nav-link",to:"/owner/user/changePassword"},"\u041f\u043e\u043c\u0435\u043d\u044f\u0442\u044c \u043f\u0430\u0440\u043e\u043b\u044c")),r.a.createElement("h3",{className:"text-center mb-2"},"\u041f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044c"),r.a.createElement("div",{className:"table-responsive"},r.a.createElement("table",{className:"table table-hover table-sm border-bottom"},r.a.createElement("tbody",null,r.a.createElement("tr",null,r.a.createElement("td",null,r.a.createElement("span",{className:"font-weight-bold"},"Id")),r.a.createElement("td",null,r.a.createElement("span",{className:"font-weight-bold"},e.user.id))),r.a.createElement("tr",null,r.a.createElement("td",null,r.a.createElement("span",{className:"font-weight-bold"},"\u041b\u043e\u0433\u0438\u043d")),r.a.createElement("td",null,r.a.createElement("span",{className:"font-weight-bold"},e.user.login))),r.a.createElement("tr",null,r.a.createElement("td",null,r.a.createElement("span",{className:"font-weight-bold"},"\u0420\u043e\u043b\u044c")),r.a.createElement("td",null,r.a.createElement("span",{className:"font-weight-bold"},e.user.role))))))):null},P=a(9),I=a.n(P),B=a(11),_=function(e){var t=e.message,a=e.large;return r.a.createElement("div",{className:"progress",style:a?{height:"2.5rem"}:{height:"3px"}},r.a.createElement("div",{className:"progress-bar progress-bar-striped progress-bar-animated text-center",role:"progressbar","aria-valuenow":"100","aria-valuemin":"0","aria-valuemax":"100",style:{width:"100%"}},t))},R=a(13),T=a.n(R),D=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(u.a)(this,Object(d.a)(t).call(this,e))).loadItems=function(e){return Object(B.a)(I.a.mark(function t(){var n,r,s,c,o,i,m;return I.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,n=a.state,r=n.user.token,s=n.limit,t.next=4,j.getCountInspectors(r);case 4:if(!((c=t.sent)&&c.count>0)){t.next=13;break}return o=(e-1)*s,t.next=9,j.getAllInspectors(r,s,o);case 9:i=t.sent,a.setState(Object(l.a)({},a.state,{inspectors:i,totalItemsCount:c.count,activePage:e,isLoaded:!0})),t.next=14;break;case 13:a.setState(Object(l.a)({},a.state,{isLoaded:!0}));case 14:t.next=20;break;case 16:t.prev=16,t.t0=t.catch(0),m=t.t0.error,a.setState(Object(l.a)({},a.state,{isLoaded:!0}),function(){a.props.showWarningAlert(m.message)});case 20:case"end":return t.stop()}},t,this,[[0,16]])}))},a.handlerChangePage=function(e){Promise.resolve().then(a.loadItems(e)).catch(function(e){var t=e.error;a.props.showWarningAlert(t.message)})},a.state={user:e.user,inspectors:[],limit:30,activePage:1,totalItemsCount:0,isLoaded:!1},a}return Object(h.a)(t,e),Object(m.a)(t,[{key:"componentDidMount",value:function(){var e=this;Promise.resolve().then(this.loadItems(this.state.activePage)).catch(function(t){var a=t.error;e.props.showWarningAlert(a.message)})}},{key:"render",value:function(){return this.state.isLoaded?r.a.createElement("div",{className:"container justify-content-center"},r.a.createElement(k,this.props,r.a.createElement(y.a,{className:"nav-link",to:"/owner/inspectors/create"},"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c")),r.a.createElement(W,{inspectors:this.state.inspectors}),this.state.totalItemsCount>this.state.limit?r.a.createElement(T.a,{hideDisabled:!0,activePage:this.state.activePage,itemsCountPerPage:this.state.limit,totalItemsCount:this.state.totalItemsCount,innerClass:"pagination justify-content-center",itemClass:"page-item",linkClass:"page-link",onChange:this.handlerChangePage}):null):r.a.createElement(_,null)}}]),t}(n.Component),W=function(e){var t=e.inspectors;return r.a.createElement("div",{className:"table-responsive"},r.a.createElement("table",{className:"table table-bordered table-hover table-sm"},r.a.createElement("thead",{className:"thead-dark"},r.a.createElement("tr",null,r.a.createElement("th",{scope:"col",className:"text-center"},"Id"),r.a.createElement("th",{scope:"col",className:"text-center"},"Login"),r.a.createElement("th",{scope:"col",className:"text-center"},"Name"))),r.a.createElement("tbody",{style:{fontSize:"0.85rem"}},t&&t.map(function(e){return r.a.createElement(z,{key:"".concat(e.id,"-").concat(e.name),inspector:e})}))))},z=function(e){var t=e.inspector;return r.a.createElement("tr",null,r.a.createElement("td",{className:"text-center"},r.a.createElement(y.a,{to:"/owner/inspectors/".concat(t.id)},t.id)),r.a.createElement("td",{className:"text-center"},t.login),r.a.createElement("td",{className:"text-center"},t.name))},M=D,G=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(u.a)(this,Object(d.a)(t).call(this,e))).handleInspectorCreate=function(e,t,n){var r=a.state.user.token;a.setState(Object(l.a)({},a.state,{isProcessing:!0})),j.createInspector(r,e,t,n).then(function(e){e&&a.setState(Object(l.a)({},a.state,{isProcessing:!1}),function(){a.props.history.goBack()})}).catch(function(e){var t=e.error;a.setState(Object(l.a)({},a.state,{isProcessing:!1}),function(){a.props.setAlert("warning",t.message)})})},a.state={user:e.user,isProcessing:!1},a}return Object(h.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){var e,t,a,n,s=this;return r.a.createElement("div",null,r.a.createElement("div",{className:"container"},r.a.createElement(k,this.props),r.a.createElement("div",{className:"row justify-content-center"},r.a.createElement("div",{className:"col-12 col-sm-12 col-md-8 col-md-offset-2 col-lg-6 col-lg-offset-3"},r.a.createElement("div",{className:"text-center font-weight-bold mb-5"},r.a.createElement("h3",null,"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u0438\u043d\u0441\u043f\u0435\u043a\u0442\u043e\u0440\u0430")),r.a.createElement("form",null,r.a.createElement("div",{className:"form-group"},r.a.createElement("input",{className:"form-control",type:"text",placeholder:"\u041b\u043e\u0433\u0438\u043d",required:!0,autoFocus:!0,ref:function(t){return e=t}})),r.a.createElement("div",{className:"form-group"},r.a.createElement("input",{className:"form-control",type:"password",placeholder:"\u041f\u0430\u0440\u043e\u043b\u044c",required:!0,ref:function(e){return t=e}})),r.a.createElement("div",{className:"form-group"},r.a.createElement("input",{className:"form-control",type:"password",placeholder:"\u041f\u043e\u0434\u0442\u0432\u0435\u0440\u0434\u0438\u0442\u044c \u043f\u0430\u0440\u043e\u043b\u044c",required:!0,ref:function(e){return a=e}})),r.a.createElement("div",{className:"form-group"},r.a.createElement("input",{className:"form-control",type:"text",placeholder:"\u0424.\u0418.\u041e. \u0438\u043d\u0441\u043f\u0435\u043a\u0442\u043e\u0440\u0430",required:!0,ref:function(e){return n=e}})),this.state.isProcessing?r.a.createElement(_,{message:"\u041e\u0431\u0440\u0430\u0431\u043e\u0442\u043a\u0430...",large:!0}):r.a.createElement("div",{className:"form-group"},r.a.createElement("button",{className:"btn btn-primary btn-block",onClick:function(r){r.preventDefault(),t.value!==a.value?s.props.setAlert("warning","\u041d\u0435 \u0432\u0435\u0440\u043d\u044b\u0439 \u043f\u0430\u0440\u043e\u043b\u044c"):s.handleInspectorCreate(e.value,t.value,n.value)}},"\u0421\u043e\u0437\u0434\u0430\u0442\u044c")))))))}}]),t}(n.Component),Y=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(u.a)(this,Object(d.a)(t).call(this,e))).state={inspector:{id:e.match.params.inspector_id},user:e.user,isLoaded:!1},a}return Object(h.a)(t,e),Object(m.a)(t,[{key:"componentDidMount",value:function(){var e=this;j.getInspectorById(this.state.user.token,this.state.inspector.id).then(function(t){t?e.setState(Object(l.a)({},e.state,{inspector:t,isLoaded:!0})):e.setState(Object(l.a)({},e.state,{isLoaded:!0}),function(){e.props.showWarningAlert("\u0418\u043d\u0441\u043f\u0435\u043a\u0442\u043e\u0440 \u043d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d")})}).catch(function(t){var a=t.error;e.setState(Object(l.a)({},e.state,{isLoaded:!0}),function(){e.props.showWarningAlert(a.message)})})}},{key:"render",value:function(){if(!this.state.isLoaded)return r.a.createElement(_,null);var e=this.state.inspector;return r.a.createElement("div",{className:"container pt-2"},r.a.createElement(k,this.props,r.a.createElement(y.a,{className:"nav-link",to:"/owner/inspectors/".concat(e.id,"/update")},"\u0418\u0437\u043c\u0435\u043d\u0438\u0442\u044c"),r.a.createElement(y.a,{className:"nav-link",to:"/owner/inspectors/".concat(e.id,"/delete")},"\u0423\u0434\u0430\u043b\u0438\u0442\u044c")),r.a.createElement("h3",{className:"text-center mb-2"},"\u0418\u043d\u0441\u043f\u0435\u043a\u0442\u043e\u0440"),r.a.createElement("div",{className:"table-responsive"},r.a.createElement("table",{className:"table table-hover table-sm border-bottom"},r.a.createElement("tbody",null,r.a.createElement("tr",null,r.a.createElement("td",null,r.a.createElement("span",{className:"font-weight-bold"},"Id")),r.a.createElement("td",null,r.a.createElement("span",{className:"font-weight-bold"},e.id))),r.a.createElement("tr",null,r.a.createElement("td",null,r.a.createElement("span",{className:"font-weight-bold"},"\u041b\u043e\u0433\u0438\u043d")),r.a.createElement("td",null,r.a.createElement("span",{className:"font-weight-bold"},e.login))),r.a.createElement("tr",null,r.a.createElement("td",null,r.a.createElement("span",{className:"font-weight-bold"},"\u0418\u043c\u044f")),r.a.createElement("td",null,r.a.createElement("span",{className:"font-weight-bold"},e.name)))))))}}]),t}(n.Component),X=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(u.a)(this,Object(d.a)(t).call(this,e))).handleUpdateInspector=function(e){if(!e)return a.props.showWarningAlert("\u041d\u0435\u043f\u0440\u0430\u0432\u0438\u043b\u044c\u043d\u043e\u0435 \u0438\u043c\u044f \u0438\u043d\u0441\u043f\u0435\u043a\u0442\u043e\u0440\u0430");a.setState(Object(l.a)({},a.state,{isProcessing:!0}));var t=a.state.user.token,n=a.state.inspector.id;j.updateInspectorById(t,n,e).then(function(e){e?a.setState(Object(l.a)({},a.state,{isProcessing:!1}),function(){a.props.showSuccessAlert("\u0418\u043c\u044f \u0438\u043d\u0441\u043f\u0435\u043a\u0442\u043e\u0440\u0430 \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u0438\u0437\u043c\u0435\u043d\u0435\u043d\u043e"),a.props.history.goBack()}):a.setState(Object(l.a)({},a.state,{isProcessing:!1}),function(){a.props.showWarningAlert("\u0418\u043d\u0441\u043f\u0435\u043a\u0442\u043e\u0440 \u043d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d")})}).catch(function(e){var t=e.error;a.setState(Object(l.a)({},a.state,{isProcessing:!1}),function(){a.props.showWarningAlert(t.message)})})},a.state={inspector:{id:e.match.params.inspector_id},user:e.user,isLoding:!1,isLoaded:!1,isProcessing:!1},a}return Object(h.a)(t,e),Object(m.a)(t,[{key:"componentDidMount",value:function(){var e=this,t=this.state.user.token,a=this.state.inspector.id;j.getInspectorById(t,a).then(function(t){t?e.setState(Object(l.a)({},e.state,{inspector:t,isLoaded:!0})):e.setState(Object(l.a)({},e.state,{isLoaded:!0}),function(){e.props.showWarningAlert("Inspector not found")})}).catch(function(t){var a=t.error;e.setState(Object(l.a)({},e.state,{isLoaded:!0}),function(){e.props.showWarningAlert(a.message)})})}},{key:"render",value:function(){var e=this;if(!this.state.isLoaded)return r.a.createElement(_,null);var t,a=this.state.inspector;return r.a.createElement("div",{className:"container"},r.a.createElement(k,this.props),r.a.createElement("div",{className:"row justify-content-center"},r.a.createElement("div",{className:"col-12 col-sm-12 col-md-8 col-md-offset-2 col-lg-6 col-lg-offset-3"},r.a.createElement("div",{className:"text-center font-weight-bold mb-5"},r.a.createElement("h3",null,"\u0418\u0437\u043c\u0435\u043d\u0438\u0442\u044c \u0438\u043c\u044f \u0438\u043d\u0441\u043f\u0435\u043a\u0442\u043e\u0440\u0430")),r.a.createElement("form",null,r.a.createElement("div",{className:"form-group"},r.a.createElement("input",{className:"form-control",type:"text",placeholder:"\u0424.\u0418.\u041e. \u0438\u043d\u0441\u043f\u0435\u043a\u0442\u043e\u0440\u0430",required:!0,ref:function(e){return t=e},defaultValue:a.name})),this.state.isProcessing?r.a.createElement(_,{message:"\u041e\u0431\u0440\u0430\u0431\u043e\u0442\u043a\u0430...",large:!0}):r.a.createElement("div",{className:"form-group"},r.a.createElement("button",{className:"btn btn-primary btn-block",onClick:function(a){a.preventDefault(),e.handleUpdateInspector(t.value)}},"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c"))))))}}]),t}(n.Component),q=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(u.a)(this,Object(d.a)(t).call(this,e))).handleClickYes=function(e){e.preventDefault();var t=a.state.user.token,n=a.state.inspector.id;a.setState(Object(l.a)({},a.state,{isLoaded:!1})),j.deleteInspectorById(t,n).then(function(e){e&&e.done&&a.setState(Object(l.a)({},a.state,{isLoaded:!0}),function(){a.props.showSuccessAlert("\u0418\u043d\u0441\u043f\u0435\u043a\u0442\u043e\u0440 \u0443\u0434\u0430\u043b\u0435\u043d"),a.props.history.go(-2)})}).catch(function(e){var t=e.error;a.setState(Object(l.a)({},a.state,{isLoaded:!0}),function(){a.props.showWarningAlert(t.message)})})},a.handleClickNo=function(e){e.preventDefault(),a.props.history.goBack()},a.state={user:e.user,inspector:{id:e.match.params.inspector_id},isLoaded:!1},a}return Object(h.a)(t,e),Object(m.a)(t,[{key:"componentDidMount",value:function(){var e=this,t=this.state.user.token,a=this.state.inspector.id;j.getInspectorById(t,a).then(function(t){if(!t)throw new Error({error:{message:"Inspector not found"}});e.setState(Object(l.a)({},e.state,{inspector:t,isLoaded:!0}))}).catch(function(t){var a=t.error;e.setState(Object(l.a)({},e.state,{isLoaded:!0}),function(){e.props.showWarningAlert(a.message),e.props.history.goBack()})})}},{key:"render",value:function(){if(!this.state.isLoaded)return r.a.createElement(_,null);var e=this.state.inspector;return r.a.createElement("div",{className:"container pt-2"},r.a.createElement("div",{className:"border p-5"},r.a.createElement("div",{className:"mb-5"},r.a.createElement("p",{className:"h3 text-center"},"\u0423\u0434\u0430\u043b\u0438\u0442\u044c \u0438\u043d\u0441\u043f\u0435\u043a\u0442\u043e\u0440\u0430 ".concat(e.name,"?"))),r.a.createElement("div",{className:"d-flex justify-content-between"},r.a.createElement("div",{className:"ml-5"},r.a.createElement("button",{className:"btn btn-success",onClick:this.handleClickYes},"Yes")),r.a.createElement("div",{className:"mr-5"},r.a.createElement("button",{className:"btn btn-danger",onClick:this.handleClickNo},"No")))))}}]),t}(n.Component),U=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(u.a)(this,Object(d.a)(t).call(this,e))).loadItems=function(e){return Object(B.a)(I.a.mark(function t(){var n,r,s,c,o,i,m;return I.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,n=a.state,r=n.user.token,s=n.limit,t.next=4,j.getCountConsumers(r);case 4:if(!((c=t.sent)&&c.count>0)){t.next=13;break}return o=(e-1)*s,t.next=9,j.getAllConsumers(r,s,o);case 9:i=t.sent,a.setState(Object(l.a)({},a.state,{consumers:i,totalItemsCount:c.count,activePage:e,isLoaded:!0})),t.next=14;break;case 13:a.setState(Object(l.a)({},a.state,{isLoaded:!0}));case 14:t.next=21;break;case 16:t.prev=16,t.t0=t.catch(0),m=t.t0.error,a.setState(Object(l.a)({},a.state,{isLoaded:!0})),a.props.showWarningAlert(m.message);case 21:case"end":return t.stop()}},t,this,[[0,16]])}))},a.handlerChangePage=function(e){Promise.resolve().then(a.loadItems(e)).catch(function(e){var t=e.error;a.props.showWarningAlert(t.message)})},a.state={user:e.user,consumers:[],limit:30,activePage:1,totalItemsCount:0,isLoaded:!1},a}return Object(h.a)(t,e),Object(m.a)(t,[{key:"componentDidMount",value:function(){var e=this;Promise.resolve().then(this.loadItems(this.state.activePage)).catch(function(t){var a=t.error;e.props.showWarningAlert(a.message)})}},{key:"render",value:function(){return this.state.isLoaded?r.a.createElement("div",{className:"container justify-content-center"},r.a.createElement(k,this.props,r.a.createElement(y.a,{className:"nav-link",to:"/owner/consumers/create"},"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c")),r.a.createElement(F,{consumers:this.state.consumers}),this.state.totalItemsCount>this.state.limit?r.a.createElement(T.a,{hideDisabled:!0,activePage:this.state.activePage,itemsCountPerPage:this.state.limit,totalItemsCount:this.state.totalItemsCount,innerClass:"pagination justify-content-center",itemClass:"page-item",linkClass:"page-link",onChange:this.handlerChangePage}):null):r.a.createElement(_,null)}}]),t}(n.Component),F=function(e){var t=e.consumers;return r.a.createElement("div",{className:"table-responsive"},r.a.createElement("table",{className:"table table-bordered table-hover table-sm"},r.a.createElement("thead",{className:"thead-dark"},r.a.createElement("tr",null,r.a.createElement("th",{scope:"col",className:"text-center"},"Id"),r.a.createElement("th",{scope:"col",className:"text-center"},"\u041b\u043e\u0433\u0438\u043d"),r.a.createElement("th",{scope:"col",className:"text-center"},"\u041f\u043e\u0442\u0440\u0435\u0431\u0438\u0442\u0435\u043b\u044c"),r.a.createElement("th",{scope:"col",className:"text-center"},"Email"),r.a.createElement("th",{scope:"col",className:"text-center"},"\u0422\u0435\u043b\u0435\u0444\u043e\u043d"))),r.a.createElement("tbody",{style:{fontSize:"0.85rem"}},t&&t.map(function(e){return r.a.createElement(J,{key:"".concat(e.id,"-").concat(e.login,"-").concat(e.name,"-").concat(e.email),consumer:e})}))))},J=function(e){var t=e.consumer;return r.a.createElement("tr",null,r.a.createElement("td",{className:"text-center"},r.a.createElement(y.a,{to:"/owner/consumers/".concat(t.id)},t.id)),r.a.createElement("td",{className:"text-center"},t.login),r.a.createElement("td",{className:"text-center"},t.name),r.a.createElement("td",{className:"text-center"},t.email),r.a.createElement("td",{className:"text-center"},r.a.createElement("a",{className:"font-weight-bold",href:"tel:".concat(t.phone)},t.phone)))},V=U,H=function(e){return r.a.createElement(y.a,{className:"nav-link",to:"/back",onClick:function(t){t.preventDefault(),e.history.goBack()}},"\u041d\u0430\u0437\u0430\u0434")},K=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(u.a)(this,Object(d.a)(t).call(this,e))).handleCreateConsumer=function(e,t,n,r,s){var c=a.state.user.token;a.setState(Object(l.a)({},a.state,{isLoaded:!1})),j.createConsumer(c,e,t,n,r,s).then(function(e){e?a.setState(Object(l.a)({},a.state,{isLoaded:!0}),function(){a.props.showSuccessAlert("\u041f\u043e\u0442\u0440\u0435\u0431\u0438\u0442\u0435\u043b\u044c \u0434\u043e\u0431\u0430\u0432\u043b\u0435\u043d"),a.props.history.goBack()}):(a.props.showWarningAlert("\u041f\u043e\u0442\u0440\u0435\u0431\u0438\u0442\u0435\u043b\u044c \u043d\u0435 \u0434\u043e\u0431\u0430\u0432\u043b\u0435\u043d"),a.setState(Object(l.a)({},a.state,{isLoaded:!0})))}).catch(function(e){var t=e.error;a.props.showWarningAlert(t.message),a.setState(Object(l.a)({},a.state,{isLoaded:!0}))})},a.state={user:e.user,isLoaded:!1},a}return Object(h.a)(t,e),Object(m.a)(t,[{key:"componentDidMount",value:function(){this.setState(Object(l.a)({},this.state,{isLoaded:!0}))}},{key:"render",value:function(){var e,t,a,n,s,c,o=this;return r.a.createElement("div",null,!this.state.isLoaded&&r.a.createElement(_,null),r.a.createElement("div",{className:"container"},r.a.createElement(Q,this.props),r.a.createElement("div",{className:"row justify-content-center mt-3"},r.a.createElement("div",{className:"col-12 col-sm-12 col-md-8 col-md-offset-2 col-lg-6 col-lg-offset-3"},r.a.createElement("div",{className:"text-center font-weight-bold mb-5"},r.a.createElement("h3",null,"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u043f\u043e\u0442\u0440\u0435\u0431\u0438\u0442\u0435\u043b\u044f")),r.a.createElement("form",null,r.a.createElement("div",{className:"form-group"},r.a.createElement("input",{className:"form-control",type:"text",placeholder:"\u041b\u043e\u0433\u0438\u043d",required:!0,autoFocus:!0,ref:function(t){return e=t}})),r.a.createElement("div",{className:"form-group"},r.a.createElement("input",{className:"form-control",type:"password",placeholder:"\u041f\u0430\u0440\u043e\u043b\u044c",required:!0,ref:function(e){return t=e}})),r.a.createElement("div",{className:"form-group"},r.a.createElement("input",{className:"form-control",type:"password",placeholder:"\u041f\u043e\u0434\u0442\u0432\u0435\u0440\u0434\u0438\u0442\u044c \u043f\u0430\u0440\u043e\u043b\u044c",required:!0,ref:function(e){return a=e}})),r.a.createElement("div",{className:"form-group"},r.a.createElement("input",{className:"form-control",type:"text",placeholder:"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435 \u043f\u043e\u0442\u0440\u0435\u0431\u0438\u0442\u0435\u043b\u044f",required:!0,ref:function(e){return n=e}})),r.a.createElement("div",{className:"form-group"},r.a.createElement("input",{className:"form-control",type:"email",placeholder:"Email",required:!0,ref:function(e){return s=e}})),r.a.createElement("div",{className:"form-group"},r.a.createElement("input",{className:"form-control",type:"email",placeholder:"\u041d\u043e\u043c\u0435\u0440 \u0442\u0435\u043b\u0435\u0444\u043e\u043d\u0430",required:!0,ref:function(e){return c=e}})),r.a.createElement("div",{className:"form-group"},r.a.createElement("button",{className:"btn btn-primary btn-block",onClick:function(r){if(r.preventDefault(),!e||!t||!a||!n||!s)return o.showWarningAlert("\u041d\u0435\u043a\u043e\u0440\u0440\u0435\u043a\u0442\u0440\u044b\u0435 \u0434\u0430\u043d\u043d\u044b\u0435 \u0432 \u0444\u043e\u0440\u043c\u0435");t.value===a.value?o.handleCreateConsumer(e.value,t.value,n.value,s.value,c.value):o.props.showWarningAlert("\u041f\u0430\u0440\u043e\u043b\u0438 \u043d\u0435 \u0441\u043e\u0432\u043f\u0430\u0434\u0430\u044e\u0442")}},"\u0421\u043e\u0437\u0434\u0430\u0442\u044c")))))))}}]),t}(n.Component),Q=function(e){return r.a.createElement("nav",{className:"nav my-2"},r.a.createElement(H,e))},Z=K,$=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(u.a)(this,Object(d.a)(t).call(this,e))).state={user:e.user,consumer:{id:e.match.params.consumer_id},isLoaded:!1},a}return Object(h.a)(t,e),Object(m.a)(t,[{key:"componentDidMount",value:function(){var e=this,t=this.state.user.token,a=this.state.consumer.id;j.getConsumerById(t,a).then(function(t){t?e.setState(Object(l.a)({},e.state,{consumer:t,isLoaded:!0})):e.setState(Object(l.a)({},e.state,{isLoaded:!0}),function(){e.props.showWarningAlert("\u041f\u043e\u0442\u0440\u0435\u0431\u0438\u0442\u0435\u043b\u044c \u043d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d"),e.props.history.goBack()})}).catch(function(t){var a=t.error;e.setState(Object(l.a)({},e.state,{isLoaded:!0}),function(){e.props.showWarningAlert(a.message),e.props.history.goBack()})})}},{key:"render",value:function(){if(!this.state.isLoaded)return r.a.createElement(_,null);var e=this.state.consumer;return r.a.createElement("div",{className:"container"},r.a.createElement(k,this.props,r.a.createElement(y.a,{className:"nav-link",to:"/owner/consumers/".concat(e.id,"/update")},"\u0418\u0437\u043c\u0435\u043d\u0438\u0442\u044c"),r.a.createElement(y.a,{className:"nav-link",to:"/owner/consumers/".concat(e.id,"/delete")},"\u0423\u0434\u0430\u043b\u0438\u0442\u044c")),r.a.createElement("h3",{className:"text-center mb-2"},"\u041f\u043e\u0442\u0440\u0435\u0431\u0438\u0442\u0435\u043b\u044c"),r.a.createElement("div",{className:"table-responsive"},r.a.createElement("table",{className:"table table-hover table-sm border-bottom"},r.a.createElement("tbody",null,r.a.createElement("tr",null,r.a.createElement("td",null,r.a.createElement("span",{className:"font-weight-bold"},"Id")),r.a.createElement("td",null,r.a.createElement("span",{className:"font-weight-bold"},e.id))),r.a.createElement("tr",null,r.a.createElement("td",null,r.a.createElement("span",{className:"font-weight-bold"},"\u041b\u043e\u0433\u0438\u043d")),r.a.createElement("td",null,r.a.createElement("span",{className:"font-weight-bold"},e.login))),r.a.createElement("tr",null,r.a.createElement("td",null,r.a.createElement("span",{className:"font-weight-bold"},"\u041f\u043e\u0442\u0440\u0435\u0431\u0438\u0442\u0435\u043b\u044c")),r.a.createElement("td",null,r.a.createElement("span",{className:"font-weight-bold"},e.name))),r.a.createElement("tr",null,r.a.createElement("td",null,r.a.createElement("span",{className:"font-weight-bold"},"Email")),r.a.createElement("td",null,r.a.createElement("span",{className:"font-weight-bold"},e.email))),r.a.createElement("tr",null,r.a.createElement("td",null,r.a.createElement("span",{className:"font-weight-bold"},"\u0422\u0435\u043b\u0435\u0444\u043e\u043d")),r.a.createElement("td",null,r.a.createElement("a",{className:"font-weight-bold",href:"tel:".concat(e.phone)},e.phone)))))))}}]),t}(n.Component),ee=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(u.a)(this,Object(d.a)(t).call(this,e))).handleUpdateConsumer=function(e,t,n){if(!e||!t)return a.props.showWarningAlert("\u041d\u0435\u043a\u043e\u0440\u0440\u0435\u043a\u0442\u043d\u044b\u0435 \u0434\u0430\u043d\u043d\u044b\u0435 \u0432 \u0444\u043e\u0440\u043c\u0435");var r=a.state.user.token,s=a.state.consumer.id;j.updateConsumerById(r,s,e,t,n).then(function(e){e?(a.props.showSuccessAlert("\u041f\u043e\u0442\u0440\u0435\u0431\u0438\u0442\u0435\u043b\u044c \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u0438\u0437\u043c\u0435\u043d\u0435\u043d"),a.props.history.goBack()):a.props.showWarningAlert("\u041d\u0435\u0443\u0434\u0430\u043b\u043e\u0441\u044c \u0438\u0437\u043c\u0435\u043d\u0438\u0442\u044c \u043f\u043e\u0442\u0440\u0435\u0431\u0438\u0442\u0435\u043b\u044f")}).catch(function(e){console.log(e),a.props.showWarningAlert(e.error.message)})},a.state={user:e.user,consumer:{id:e.match.params.consumer_id}},a}return Object(h.a)(t,e),Object(m.a)(t,[{key:"componentDidMount",value:function(){var e=this,t=this.state.user.token,a=this.state.consumer.id;j.getConsumerById(t,a).then(function(t){t?e.setState(Object(l.a)({},e.state,{consumer:t})):(e.props.showWarningAlert("\u041f\u043e\u0442\u0440\u0435\u0431\u0438\u0442\u0435\u043b\u044c \u043d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d"),e.props.history.goBack())}).catch(function(t){var a=t.error;e.props.showWarningAlert(a.message),e.props.history.goBack()})}},{key:"render",value:function(){var e,t,a,n=this,s=this.state.consumer;return r.a.createElement("div",{className:"container"},r.a.createElement(te,this.props),r.a.createElement("div",{className:"row justify-content-center mt-3"},r.a.createElement("div",{className:"col-12 col-sm-12 col-md-8 col-md-offset-2 col-lg-6 col-lg-offset-3"},r.a.createElement("div",{className:"text-center font-weight-bold mb-5"},r.a.createElement("h3",null,"\u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u043f\u043e\u0442\u0440\u0435\u0431\u0438\u0442\u0435\u043b\u044f")),r.a.createElement("form",null,r.a.createElement("div",{className:"form-group"},r.a.createElement("input",{className:"form-control",type:"text",placeholder:"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435 \u043f\u043e\u0442\u0440\u0435\u0431\u0438\u0442\u0435\u043b\u044f",required:!0,autoFocus:!0,defaultValue:s.name,ref:function(t){return e=t}})),r.a.createElement("div",{className:"form-group"},r.a.createElement("input",{className:"form-control",type:"email",placeholder:"Email",required:!0,defaultValue:s.email,ref:function(e){return t=e}})),r.a.createElement("div",{className:"form-group"},r.a.createElement("input",{className:"form-control",type:"text",placeholder:"Email",required:!0,defaultValue:s.phone,ref:function(e){return a=e}})),r.a.createElement("div",{className:"form-group"},r.a.createElement("button",{className:"btn btn-primary btn-block",onClick:function(r){r.preventDefault(),n.handleUpdateConsumer(e.value,t.value,a.value)}},"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c"))))))}}]),t}(n.Component),te=function(e){return r.a.createElement("nav",{className:"nav my-2"},r.a.createElement(H,e))},ae=ee,ne=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(u.a)(this,Object(d.a)(t).call(this,e))).handleClickYes=function(e){e.preventDefault();var t=a.state.user.token,n=a.state.consumer.id;j.deleteConsumerById(t,n).then(function(e){e&&(a.props.showSuccessAlert("\u041f\u043e\u0442\u0440\u0435\u0431\u0438\u0442\u0435\u043b\u044c \u0443\u0434\u0430\u043b\u0435\u043d"),a.props.history.go(-2))}).catch(function(e){var t=e.error;a.props.showWarningAlert(t.message)})},a.handleClickNo=function(e){e.preventDefault(),a.props.history.goBack()},a.state={user:e.user,consumer:{id:e.match.params.consumer_id}},a}return Object(h.a)(t,e),Object(m.a)(t,[{key:"componentDidMount",value:function(){var e=this,t=this.state.user.token,a=this.state.consumer.id;j.getConsumerById(t,a).then(function(t){t?e.setState(Object(l.a)({},e.state,{consumer:t})):(e.props.showWarningAlert("\u041f\u043e\u0442\u0440\u0435\u0431\u0438\u0442\u0435\u043b\u044c \u043d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d"),e.props.history.goBack())}).catch(function(t){var a=t.error;e.props.showWarningAlert(a.message),e.props.history.goBack()})}},{key:"render",value:function(){var e=this.state.consumer;return r.a.createElement("div",{className:"container pt-2"},r.a.createElement("div",{className:"border p-5"},r.a.createElement("div",{className:"mb-5"},r.a.createElement("p",{className:"h3 text-center"},"\u0423\u0434\u0430\u043b\u0438\u0442\u044c \u043f\u043e\u0442\u0440\u0435\u0431\u0438\u0442\u0435\u043b\u044f ".concat(e.name,"?"))),r.a.createElement("div",{className:"d-flex justify-content-between"},r.a.createElement("div",{className:"ml-5"},r.a.createElement("button",{className:"btn btn-success",onClick:this.handleClickYes},"Yes")),r.a.createElement("div",{className:"mr-5"},r.a.createElement("button",{className:"btn btn-danger",onClick:this.handleClickNo},"No")))))}}]),t}(n.Component),re=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(u.a)(this,Object(d.a)(t).call(this,e))).loadItems=function(e){return Object(B.a)(I.a.mark(function t(){var n,r,s,c,o,i,m;return I.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,n=a.state,r=n.user.token,s=n.limit,t.next=4,j.getCountMeters(r);case 4:if(!((c=t.sent)&&c.count>0)){t.next=13;break}return o=(e-1)*s,t.next=9,j.getAllMeters(r,s,o);case 9:i=t.sent,a.setState(Object(l.a)({},a.state,{meters:i,totalItemsCount:c.count,activePage:e,isLoaded:!0})),t.next=14;break;case 13:a.setState(Object(l.a)({},a.state,{isLoaded:!0}));case 14:t.next=20;break;case 16:t.prev=16,t.t0=t.catch(0),m=t.t0.error,a.props.showWarningAlert(m.message);case 20:case"end":return t.stop()}},t,this,[[0,16]])}))},a.handlerChangePage=function(e){Promise.resolve().then(a.loadItems(e)).catch(function(e){var t=e.error;a.props.showWarningAlert(t.message)})},a.state={user:e.user,meters:[],limit:30,activePage:1,totalItemsCount:0,isLoaded:!1},a}return Object(h.a)(t,e),Object(m.a)(t,[{key:"componentDidMount",value:function(){var e=this;Promise.resolve().then(this.loadItems(this.state.activePage)).catch(function(t){var a=t.error;e.props.showWarningAlert(a.message)})}},{key:"render",value:function(){return this.state.isLoaded?r.a.createElement("div",{className:"container justify-content-center"},r.a.createElement(k,this.props,r.a.createElement(y.a,{className:"nav-link",to:"/owner/meters/create"},"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c")),r.a.createElement(se,{meters:this.state.meters}),this.state.totalItemsCount>this.state.limit?r.a.createElement(T.a,{hideDisabled:!0,activePage:this.state.activePage,itemsCountPerPage:this.state.limit,totalItemsCount:this.state.totalItemsCount,innerClass:"pagination justify-content-center",itemClass:"page-item",linkClass:"page-link",onChange:this.handlerChangePage}):null):r.a.createElement(_,null)}}]),t}(n.Component),se=function(e){var t=e.meters;return r.a.createElement("div",{className:"table-responsive"},r.a.createElement("table",{className:"table table-bordered table-hover table-sm"},r.a.createElement("thead",{className:"thead-dark"},r.a.createElement("tr",null,r.a.createElement("th",{scope:"col",className:"text-center"},"Id"),r.a.createElement("th",{scope:"col",className:"text-center"},"Number"))),r.a.createElement("tbody",{style:{fontSize:"0.85rem"}},t&&t.map(function(e){return r.a.createElement(ce,{key:"".concat(e.id,"-").concat(e.number),meter:e})}))))},ce=function(e){var t=e.meter;return r.a.createElement("tr",null,r.a.createElement("td",{className:"text-center"},r.a.createElement(y.a,{to:"/owner/meters/".concat(t.id)},t.id)),r.a.createElement("td",{className:"text-center"},t.number))},oe=re,le=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(u.a)(this,Object(d.a)(t).call(this,e))).handleCreateMeter=function(e){if(e){var t=a.props.user.token;a.setState(Object(l.a)({},a.state,{isProcessing:!0})),j.createMeter(t,e).then(function(e){e?a.setState(Object(l.a)({},a.state,{isProcessing:!1}),function(){a.props.showSuccessAlert("\u0421\u0447\u0435\u0442\u0447\u0438\u043a \u0434\u043e\u0431\u0430\u0432\u043b\u0435\u043d"),a.props.history.goBack()}):a.setState(Object(l.a)({},a.state,{isProcessing:!1}),function(){a.props.showWarningAlert("\u041d\u0435\u0443\u0434\u0430\u043b\u043e\u0441\u044c \u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u0441\u0447\u0435\u0442\u0447\u0438\u043a")})}).catch(function(e){var t=e.error;a.setState(Object(l.a)({},a.state,{isProcessing:!1}),function(){a.props.showWarningAlert(t.message)})})}else a.props.showWarningAlert("\u041d\u0435\u043a\u043e\u0440\u0440\u0435\u043a\u0442\u043d\u044b\u0439 \u043d\u043e\u043c\u0435\u0440 \u0441\u0447\u0435\u0442\u0447\u0438\u043a\u0430")},a.state={isProcessing:!1},a}return Object(h.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){var e,t=this;return r.a.createElement("div",{className:"container"},r.a.createElement(ie,this.props),r.a.createElement("div",{className:"row justify-content-center"},r.a.createElement("div",{className:"col-12 col-sm-12 col-md-8 col-md-offset-2 col-lg-6 col-lg-offset-3"},r.a.createElement("div",{className:"text-center font-weight-bold mb-5"},r.a.createElement("h3",null,"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u0441\u0447\u0435\u0442\u0447\u0438\u043a")),r.a.createElement("form",null,r.a.createElement("div",{className:"form-group"},r.a.createElement("input",{className:"form-control",type:"text",placeholder:"\u041d\u043e\u043c\u0435\u0440 \u0441\u0447\u0435\u0442\u0447\u0438\u043a\u0430",required:!0,ref:function(t){return e=t}})),r.a.createElement("div",{className:"form-group"},this.state.isProcessing?r.a.createElement(_,{message:"\u0421\u043e\u0437\u0434\u0430\u043d\u0438\u0435 \u0441\u0447\u0435\u0442\u0447\u0438\u043a\u0430...",large:!0}):r.a.createElement("button",{className:"btn btn-primary btn-block",onClick:function(a){a.preventDefault(),t.handleCreateMeter(e.value)}},"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c"))))))}}]),t}(n.Component),ie=function(e){return r.a.createElement("nav",{className:"nav my-2"},r.a.createElement(H,e))},me=le,ue=a(27),de=a.n(ue),he=function(e){var t=new Date(e),a=t.getFullYear(),n=t.getMonth()+1,r=t.getDate(),s=t.getHours(),c=t.getMinutes(),o=t.getSeconds();return"".concat(a,"-").concat(n<9?"0".concat(n):n,"-").concat(r," ").concat(s,":").concat(c,":").concat(o)},pe=function(e){return de()(new Date(e),"dd.mm.yyyy HH:MM:ss")},fe=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(u.a)(this,Object(d.a)(t).call(this,e))).loadItems=function(e,t){return Object(B.a)(I.a.mark(function n(){var r,s,c,o,i,m,u;return I.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,r=a.state,s=r.user.token,c=r.limit,n.next=4,j.getCountDatas(s,e.id);case 4:if(!((o=n.sent)&&o.count>0)){n.next=13;break}return i=(t-1)*c,n.next=9,j.getAllDataByMeterId(s,e.id,c,i);case 9:m=n.sent,a.setState(Object(l.a)({},a.state,{meter:e,datas:m,totalItemsCount:o.count,activePage:t,isLoaded:!0})),n.next=14;break;case 13:a.setState(Object(l.a)({},a.state,{meter:e,isLoaded:!0}));case 14:n.next=20;break;case 16:n.prev=16,n.t0=n.catch(0),u=n.t0.error,a.props.showWarningAlert(u.message);case 20:case"end":return n.stop()}},n,this,[[0,16]])}))},a.handlerChangePage=function(e){Promise.resolve().then(a.loadItems(a.state.meter,e)).catch(function(e){var t=e.error;a.props.showWarningAlert(t.message)})},a.state={user:e.user,meter:{id:e.match.params.meter_id},datas:[],limit:15,activePage:1,totalItemsCount:0,isLoaded:!1},a}return Object(h.a)(t,e),Object(m.a)(t,[{key:"componentDidMount",value:function(){var e=this,t=this.state.user.token,a=this.state.meter.id;j.getMeterById(t,a).then(function(t){if(t)return Promise.resolve().then(e.loadItems(t,e.state.activePage)).catch(function(t){var a=t.error;e.props.showWarningAlert(a.message)});e.props.showWarningAlert("\u0421\u0447\u0435\u0442\u0447\u0438\u043a \u043d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d"),e.props.history.goBack()}).catch(function(t){var a=t.error;e.props.showWarningAlert(a.message),e.props.history.goBack()})}},{key:"render",value:function(){if(!this.state.isLoaded)return r.a.createElement(_,null);var e=this.state.meter;return r.a.createElement("div",{className:"container"},r.a.createElement(k,this.props,r.a.createElement(y.a,{className:"nav-link",to:"/owner/meters/".concat(e.id,"/update")},"\u0418\u0437\u043c\u0435\u043d\u0438\u0442\u044c"),r.a.createElement(y.a,{className:"nav-link",to:"/owner/meters/".concat(e.id,"/delete")},"\u0423\u0434\u0430\u043b\u0438\u0442\u044c")),r.a.createElement("h3",{className:"text-center mb-2"},"\u0421\u0447\u0435\u0442\u0447\u0438\u043a"),r.a.createElement("div",{className:"table-responsive"},r.a.createElement("table",{className:"table table-hover table-sm border-bottom"},r.a.createElement("tbody",null,r.a.createElement("tr",null,r.a.createElement("td",null,r.a.createElement("span",{className:"font-weight-bold"},"Id")),r.a.createElement("td",null,r.a.createElement("span",{className:"font-weight-bold"},e.id))),r.a.createElement("tr",null,r.a.createElement("td",null,r.a.createElement("span",{className:"font-weight-bold"},"\u041d\u043e\u043c\u0435\u0440")),r.a.createElement("td",null,r.a.createElement("span",{className:"font-weight-bold"},e.number)))))),r.a.createElement("h3",{className:"text-center mb-2"},"\u041f\u043e\u043a\u0430\u0437\u0430\u043d\u0438\u044f"),r.a.createElement(Ee,{datas:this.state.datas}),this.state.totalItemsCount>this.state.limit?r.a.createElement(T.a,{hideDisabled:!0,activePage:this.state.activePage,itemsCountPerPage:this.state.limit,totalItemsCount:this.state.totalItemsCount,innerClass:"pagination justify-content-center",itemClass:"page-item",linkClass:"page-link",onChange:this.handlerChangePage}):null)}}]),t}(n.Component),Ee=function(e){var t=e.datas;return r.a.createElement("table",{className:"table table-bordered table-hover table-sm"},r.a.createElement("thead",{className:"thead-dark"},r.a.createElement("tr",null,r.a.createElement("th",{scope:"col",className:"text-center"},"\u0414\u0430\u0442\u0430"),r.a.createElement("th",{scope:"col",className:"text-center"},"\u041f\u043e\u043a\u0430\u0437\u0430\u043d\u0438\u0435"))),r.a.createElement("tbody",{style:{fontSize:"0.85rem"}},t&&t.map(function(e){return r.a.createElement(ge,{key:"".concat(e.id,"-").concat(e.date),data:e})})))},ge=function(e){var t=e.data;return r.a.createElement("tr",null,r.a.createElement("td",{className:"text-center"},pe(t.date)),r.a.createElement("td",{className:"text-center"},t.value))},be=fe,ve=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(u.a)(this,Object(d.a)(t).call(this,e))).handleUpdateMeter=function(e){if(e){var t=a.state.user.token,n=a.state.meter.id;j.updateMeterById(t,n,e).then(function(e){e?(a.props.showSuccessAlert("\u0421\u0447\u0435\u0442\u0447\u0438\u043a \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u0438\u0437\u043c\u0435\u043d\u0435\u043d"),a.props.history.goBack()):a.props.showWarningAlert("\u041d\u0435\u0443\u0434\u0430\u043b\u043e\u0441\u044c \u0438\u0437\u043c\u0435\u043d\u0438\u0442\u044c \u0441\u0447\u0435\u0442\u0447\u0438\u043a")}).catch(function(e){var t=e.error;a.props.showWarningAlert(t.message)})}else a.props.showWarningAlert("\u041d\u0435\u043a\u043e\u0440\u0440\u0435\u043a\u0442\u043d\u044b\u0439 \u043d\u043e\u043c\u0435\u0440 \u0441\u0447\u0435\u0442\u0447\u0438\u043a\u0430")},a.state={user:e.user,meter:{id:e.match.params.meter_id}},a}return Object(h.a)(t,e),Object(m.a)(t,[{key:"componentDidMount",value:function(){var e=this,t=this.state.user.token,a=this.state.meter.id;j.getMeterById(t,a).then(function(t){t?e.setState(Object(l.a)({},e.state,{meter:t})):(e.props.showWarningAlert("\u0421\u0447\u0435\u0442\u0447\u0438\u043a \u043d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d"),e.props.history.goBack())}).catch(function(t){var a=t.error;e.props.showWarningAlert(a.message),e.props.history.goBack()})}},{key:"render",value:function(){var e,t=this,a=this.state.meter;return r.a.createElement("div",{className:"container"},r.a.createElement(Ne,this.props),r.a.createElement("div",{className:"row justify-content-center"},r.a.createElement("div",{className:"col-12 col-sm-12 col-md-8 col-md-offset-2 col-lg-6 col-lg-offset-3"},r.a.createElement("div",{className:"text-center font-weight-bold mb-5"},r.a.createElement("h3",null,"\u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u0441\u0447\u0435\u0442\u0447\u0438\u043a")),r.a.createElement("form",null,r.a.createElement("div",{className:"form-group"},r.a.createElement("input",{className:"form-control",type:"text",placeholder:"\u041d\u043e\u043c\u0435\u0440 \u0441\u0447\u0435\u0442\u0447\u0438\u043a\u0430",required:!0,ref:function(t){return e=t},defaultValue:a.number})),r.a.createElement("div",{className:"form-group"},r.a.createElement("button",{className:"btn btn-primary btn-block",onClick:function(a){a.preventDefault(),t.handleUpdateMeter(e.value)}},"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c"))))))}}]),t}(n.Component),Ne=function(e){return r.a.createElement("nav",{className:"nav my-2"},r.a.createElement(H,e))},we=ve,je=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(u.a)(this,Object(d.a)(t).call(this,e))).handleClickYes=function(e){e.preventDefault();var t=a.state.user.token,n=a.state.meter.id;j.deleteMeterById(t,n).then(function(e){e&&(a.props.showSuccessAlert("\u0421\u0447\u0435\u0442\u0447\u0438\u043a \u0443\u0434\u0430\u043b\u0435\u043d"),a.props.history.go(-2))}).catch(function(e){var t=e.error;a.props.showWarningAlert(t.message)})},a.handleClickNo=function(e){e.preventDefault(),a.props.history.goBack()},a.state={user:e.user,meter:{id:e.match.params.meter_id}},a}return Object(h.a)(t,e),Object(m.a)(t,[{key:"componentDidMount",value:function(){var e=this,t=this.state.user.token,a=this.state.meter.id;j.getMeterById(t,a).then(function(t){t?e.setState(Object(l.a)({},e.state,{meter:t})):(e.props.showWarningAlert("\u0421\u0447\u0435\u0442\u0447\u0438\u043a \u043d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d"),e.props.history.goBack())}).catch(function(t){var a=t.error;e.props.showWarningAlert(a.message),e.props.history.goBack()})}},{key:"render",value:function(){var e=this.state.meter;return r.a.createElement("div",{className:"container pt-2"},r.a.createElement("div",{className:"border p-5"},r.a.createElement("div",{className:"mb-5"},r.a.createElement("p",{className:"h3 text-center"},"\u0423\u0434\u0430\u043b\u0438\u0442\u044c \u0441\u0447\u0435\u0442\u0447\u0438\u043a ".concat(e.number,"?"))),r.a.createElement("div",{className:"d-flex justify-content-between"},r.a.createElement("div",{className:"ml-5"},r.a.createElement("button",{className:"btn btn-success",onClick:this.handleClickYes},"Yes")),r.a.createElement("div",{className:"mr-5"},r.a.createElement("button",{className:"btn btn-danger",onClick:this.handleClickNo},"No")))))}}]),t}(n.Component),ye=function(e){var t,a=e.user.token,n=e.match.params.meter_id;return r.a.createElement("div",{className:"container justify-content-center"},r.a.createElement(k,e),r.a.createElement("div",{className:"row justify-content-center"},r.a.createElement("div",{className:"col-12 col-sm-12 col-md-8 col-md-offset-2 col-lg-6 col-lg-offset-3"},r.a.createElement("div",{className:"text-center font-weight-bold mb-5"},r.a.createElement("h3",null,"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u043f\u043e\u043a\u0430\u0437\u0430\u043d\u0438\u0435 \u0441\u0447\u0435\u0442\u0447\u0438\u043a\u0430")),r.a.createElement("form",null,r.a.createElement("div",{className:"form-group"},r.a.createElement("input",{className:"form-control",type:"text",placeholder:"\u041f\u043e\u043a\u0430\u0437\u0430\u043d\u0438\u0435, \u043a\u0412\u0442",required:!0,autoFocus:!0,ref:function(e){return t=e}})),r.a.createElement("div",{className:"form-group"},r.a.createElement("button",{className:"btn btn-primary btn-block",onClick:function(r){if(r.preventDefault(),t.value){var s=he(Date.now());console.log(n,s,t.value),j.createData(a,n,s,t.value).then(function(t){t?(e.showSuccessAlert("\u041f\u043e\u043a\u0430\u0437\u0430\u043d\u0438\u044f \u0434\u043e\u0431\u0430\u0432\u043b\u0435\u043d\u044b"),e.history.goBack()):e.showWarningAlert("\u041d\u0435\u0443\u0434\u0430\u043b\u043e\u0441\u044c \u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u043f\u043e\u043a\u0430\u0437\u0430\u043d\u0438\u044f \u0441\u0447\u0435\u0442\u0447\u0438\u043a\u0430")}).catch(function(t){var a=t.error;e.showWarningAlert(a.message)})}else e.showWarningAlert("\u041d\u0435 \u043a\u043e\u0440\u0440\u0435\u043a\u0442\u043d\u044b\u0435 \u043f\u043e\u043a\u0430\u0437\u0430\u043d\u0438\u044f \u0441\u0447\u0435\u0442\u0447\u0438\u043a\u0430")}},"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c"))))))},ke=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(u.a)(this,Object(d.a)(t).call(this,e))).loadItems=function(e){return Object(B.a)(I.a.mark(function t(){var n,r,s,c,o,i,m;return I.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,n=a.state,r=n.user.token,s=n.limit,t.next=4,j.getCountPlaces(r);case 4:if(!((c=t.sent)&&c.count>0)){t.next=13;break}return o=(e-1)*s,t.next=9,j.getAllPlaces(r,s,o);case 9:i=t.sent,a.setState(Object(l.a)({},a.state,{places:i,totalItemsCount:c.count,activePage:e,isLoaded:!0})),t.next=14;break;case 13:a.setState(Object(l.a)({},a.state,{isLoaded:!0}));case 14:t.next=20;break;case 16:t.prev=16,t.t0=t.catch(0),m=t.t0.error,a.props.showWarningAlert(m.message);case 20:case"end":return t.stop()}},t,this,[[0,16]])}))},a.handlerChangePage=function(e){Promise.resolve().then(a.loadItems(e)).catch(function(e){var t=e.error;a.props.showWarningAlert(t.message)})},a.state={user:e.user,places:[],limit:30,activePage:1,totalItemsCount:0,isLoaded:!1},a}return Object(h.a)(t,e),Object(m.a)(t,[{key:"componentDidMount",value:function(){var e=this;Promise.resolve().then(this.loadItems(this.state.activePage)).catch(function(t){var a=t.error;e.props.showWarningAlert(a.message)})}},{key:"render",value:function(){return this.state.isLoaded?r.a.createElement("div",{className:"container justify-content-center"},r.a.createElement(k,this.props,r.a.createElement(y.a,{className:"nav-link",to:"/owner/places/create"},"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c")),r.a.createElement(Oe,{places:this.state.places}),this.state.totalItemsCount>this.state.limit?r.a.createElement(T.a,{hideDisabled:!0,activePage:this.state.activePage,itemsCountPerPage:this.state.limit,totalItemsCount:this.state.totalItemsCount,innerClass:"pagination justify-content-center",itemClass:"page-item",linkClass:"page-link",onChange:this.handlerChangePage}):null):r.a.createElement(_,null)}}]),t}(n.Component),Oe=function(e){var t=e.places;return r.a.createElement("div",{className:"table-responsive"},r.a.createElement("table",{className:"table table-bordered table-hover table-sm"},r.a.createElement("thead",{className:"thead-dark"},r.a.createElement("tr",null,r.a.createElement("th",{scope:"col",className:"text-center"},"Id"),r.a.createElement("th",{scope:"col",className:"text-center"},"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435"),r.a.createElement("th",{scope:"col",className:"text-center"},"\u041f\u043e\u0442\u0440\u0435\u0431\u0438\u0442\u0435\u043b\u044c"),r.a.createElement("th",{scope:"col",className:"text-center"},"\u0421\u0447\u0435\u0442\u0447\u0438\u043a"),r.a.createElement("th",{scope:"col",className:"text-center"},"\u041f\u043e\u0434\u043f\u0438\u0441\u044c"))),r.a.createElement("tbody",{style:{fontSize:"0.85rem"}},t&&t.map(function(e){return r.a.createElement(Ce,{key:"".concat(e.id,"-").concat(e.name),place:e})}))))},Ce=function(e){var t=e.place;return r.a.createElement("tr",null,r.a.createElement("td",{className:"text-center"},r.a.createElement(y.a,{to:"/owner/places/".concat(t.id)},t.id)),r.a.createElement("td",{className:"text-center"},t.name),r.a.createElement("td",{className:"text-center"},t.consumer?r.a.createElement(y.a,{to:"/owner/consumers/".concat(t.consumer.id)},t.consumer.name):null),r.a.createElement("td",{className:"text-center"},t.meter?r.a.createElement(y.a,{to:"/owner/meters/".concat(t.meter.id)},t.meter.number):null),r.a.createElement("td",{className:"text-center"},t.isSignNeed?"\u0414\u0430":"\u041d\u0435\u0442"))},xe=ke,Ae=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(u.a)(this,Object(d.a)(t).call(this,e))).handleCreatePlace=function(e,t,n,r){if(!e)return a.props.showWarningAlert("\u041d\u0435\u043a\u043e\u0440\u0440\u0435\u043a\u0442\u043d\u043e\u0435 \u043d\u0430\u0437\u0432\u0430\u043d\u0438\u0435 \u043c\u0435\u0441\u0442\u0430");a.setState(Object(l.a)({},a.state,{isProcess:!0}));var s=a.state.user.token;j.createPlace(s,e,t,n,r).then(function(e){e?a.setState(Object(l.a)({},a.state,{isProcess:!1}),function(){a.props.history.goBack()}):a.setState(Object(l.a)({},a.state,{isProcess:!1}),function(){a.props.showWarningAlert("\u041d\u0435 \u0443\u0434\u0430\u043b\u043e\u0441\u044c \u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u043d\u043e\u0432\u043e\u0435 \u043c\u0435\u0441\u0442\u043e")})}).catch(function(e){var t=e.error;a.setState(Object(l.a)({},a.state,{isProcess:!1}),function(){a.props.showWarningAlert(t.message)})})},a.state={user:e.user,consumers:[],meters:[],isLoaded:!1,isProcess:!1},a}return Object(h.a)(t,e),Object(m.a)(t,[{key:"componentDidMount",value:function(){var e=this;Promise.resolve().then(Object(B.a)(I.a.mark(function t(){var a,n,r;return I.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return a=e.state.user.token,t.next=3,j.getAllMetersNotInPlace(a);case 3:return n=t.sent,t.next=6,j.getAllConsumers(a);case 6:r=t.sent,e.setState(Object(l.a)({},e.state,{isLoaded:!0,meters:n||[],consumers:r||[]}));case 8:case"end":return t.stop()}},t,this)})),function(t){var a=t.error;e.setState(Object(l.a)({},e.state,{isLoaded:!0}),function(){e.props.showWarningAlert(a.message)})})}},{key:"render",value:function(){var e,t,a,n,s=this;if(!this.state.isLoaded)return r.a.createElement(_,null);return this.state.isLoaded?r.a.createElement("div",{className:"container"},r.a.createElement(k,this.props),r.a.createElement("div",{className:"row justify-content-center mt-3"},r.a.createElement("div",{className:"col-12 col-sm-12 col-md-8 col-md-offset-2 col-lg-6 col-lg-offset-3"},r.a.createElement("div",{className:"text-center font-weight-bold mb-5"},r.a.createElement("h3",null,"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u043c\u0435\u0441\u0442\u043e \u0443\u0441\u0442\u0430\u043d\u043e\u0432\u043a\u0438 \u0441\u0447\u0435\u0442\u0447\u0438\u043a\u0430")),r.a.createElement("form",null,r.a.createElement("div",{className:"form-group"},r.a.createElement("input",{className:"form-control",type:"text",placeholder:"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435 \u043c\u0435\u0441\u0442\u0430",required:!0,autoFocus:!0,ref:function(t){return e=t}})),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"cmbMeters"},"\u0421\u0447\u0435\u0442\u0447\u0438\u043a\u0438"),r.a.createElement("select",{className:"form-control",id:"cmbMeters",ref:function(e){return n=e}},r.a.createElement("option",null),this.state.meters.map(function(e){return r.a.createElement("option",{key:"".concat(e.id),value:"".concat(e.id)},"".concat(e.number))}))),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"cmbConsumers"},"\u041f\u043e\u0442\u0440\u0435\u0431\u0438\u0442\u0435\u043b\u0438"),r.a.createElement("select",{className:"form-control",id:"cmbConsumers",ref:function(e){return a=e}},r.a.createElement("option",null),this.state.consumers.map(function(e){return r.a.createElement("option",{key:"".concat(e.id),value:"".concat(e.id)},"".concat(e.name))}))),r.a.createElement("div",{className:"form-group form-check"},r.a.createElement("input",{type:"checkbox",className:"form-check-input",id:"cbIsSignNeed",required:!0,ref:function(e){return t=e}}),r.a.createElement("label",{className:"form-check-label",htmlFor:"cbIsSignNeed"},"\u041f\u043e\u0434\u043f\u0438\u0441\u044c?")),r.a.createElement("div",{className:"form-group"},this.state.isProcess?r.a.createElement(_,{message:"\u0421\u043e\u0437\u0434\u0430\u043d\u0438\u0435...",large:!0}):r.a.createElement("button",{className:"btn btn-primary btn-block",onClick:function(r){r.preventDefault(),s.handleCreatePlace(e.value,t.checked,a.value,n.value)}},"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c")))))):null}}]),t}(n.Component),Le=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(u.a)(this,Object(d.a)(t).call(this,e))).state={user:e.user,place:{id:e.match.params.place_id},isLoaded:!1},a}return Object(h.a)(t,e),Object(m.a)(t,[{key:"componentDidMount",value:function(){var e=this,t=this.state.user.token,a=this.state.place.id;j.getPlaceById(t,a).then(function(t){t?e.setState(Object(l.a)({},e.state,{place:t,isLoaded:!0})):(e.props.showWarningAlert("\u041c\u0435\u0441\u0442\u043e \u043d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d\u043e"),e.props.history.goBack())},function(t){var a=t.error;e.props.showWarningAlert(a.message),e.props.history.goBack()})}},{key:"render",value:function(){var e=this.state.place;return this.state.isLoaded?r.a.createElement("div",{className:"container"},r.a.createElement(k,this.props,r.a.createElement(y.a,{className:"nav-link",to:"/owner/places/".concat(e.id,"/update")},"\u0418\u0437\u043c\u0435\u043d\u0438\u0442\u044c"),r.a.createElement(y.a,{className:"nav-link",to:"/owner/places/".concat(e.id,"/delete")},"\u0423\u0434\u0430\u043b\u0438\u0442\u044c")),r.a.createElement("h3",{className:"text-center mb-2"},"\u041c\u0435\u0441\u0442\u043e \u0443\u0441\u0442\u0430\u043d\u043e\u0432\u043a\u0438 \u0441\u0447\u0435\u0442\u0447\u0438\u043a\u0430"),r.a.createElement("div",{className:"table-responsive"},r.a.createElement("table",{className:"table table-hover table-sm border-bottom"},r.a.createElement("tbody",null,r.a.createElement("tr",null,r.a.createElement("td",null,r.a.createElement("span",{className:"font-weight-bold"},"Id")),r.a.createElement("td",null,r.a.createElement("span",{className:"font-weight-bold"},e.id))),r.a.createElement("tr",null,r.a.createElement("td",null,r.a.createElement("span",{className:"font-weight-bold"},"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435")),r.a.createElement("td",null,r.a.createElement("span",{className:"font-weight-bold"},e.name))),r.a.createElement("tr",null,r.a.createElement("td",null,r.a.createElement("span",{className:"font-weight-bold"},"\u041f\u043e\u0442\u0440\u0435\u0431\u0438\u0442\u0435\u043b\u044c")),r.a.createElement("td",null,r.a.createElement("span",{className:"font-weight-bold"},e.consumer?e.consumer.name:"---"))),r.a.createElement("tr",null,r.a.createElement("td",null,r.a.createElement("span",{className:"font-weight-bold"},"\u0421\u0447\u0435\u0442\u0447\u0438\u043a")),r.a.createElement("td",null,r.a.createElement("span",{className:"font-weight-bold"},e.meter?e.meter.number:"---"))),r.a.createElement("tr",null,r.a.createElement("td",null,r.a.createElement("span",{className:"font-weight-bold"},"\u041f\u043e\u0434\u043f\u0438\u0441\u044c")),r.a.createElement("td",null,r.a.createElement("span",{className:"font-weight-bold"},e.isSignNeed?"\u0414\u0430":"\u041d\u0435\u0442"))),r.a.createElement("tr",null,r.a.createElement("td",{colSpan:"2"},r.a.createElement("span",{className:"font-weight-bold"},"\u041f\u043e\u0441\u043b\u0435\u0434\u043d\u0438\u0435 \u043f\u043e\u043a\u0430\u0437\u0430\u043d\u0438\u044f:"))),r.a.createElement("tr",null,r.a.createElement("td",null,r.a.createElement("span",{className:"font-weight-bold"},"\u0414\u0430\u0442\u0430")),r.a.createElement("td",null,r.a.createElement("span",{className:"font-weight-bold"},e.meter&&e.meter.lastData?pe(e.meter.lastData.date):"---"))),r.a.createElement("tr",null,r.a.createElement("td",null,r.a.createElement("span",{className:"font-weight-bold"},"\u041f\u043e\u043a\u0430\u0437\u0430\u043d\u0438\u0435")),r.a.createElement("td",null,r.a.createElement("span",{className:"font-weight-bold"},e.meter&&e.meter.lastData?e.meter.lastData.value:"---"))))))):null}}]),t}(n.Component),Se=a(16),Pe=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(u.a)(this,Object(d.a)(t).call(this,e))).handleUpdatePlace=function(e,t,n,r){if(!e)return a.props.showWarningAlert("\u041d\u0435\u043a\u043e\u0440\u0440\u0435\u043a\u0442\u043d\u043e\u0435 \u043d\u0430\u0437\u0432\u0430\u043d\u0438\u0435 \u043c\u0435\u0441\u0442\u0430");a.setState(Object(l.a)({},a.state,{isProcess:!0}));var s=a.state.user.token,c=a.state.place.id;j.updatePlaceById(s,c,e,t,n,r).then(function(e){e?a.setState(Object(l.a)({},a.state,{isProcess:!1}),function(){a.props.showSuccessAlert("\u041c\u0435\u0441\u0442\u043e \u0441\u043e\u0445\u0440\u0430\u043d\u0435\u043d\u043e"),a.props.history.goBack()}):a.setState(Object(l.a)({},a.state,{isProcess:!1}),function(){a.props.showWarningAlert("\u041c\u0435\u0441\u0442\u043e \u043d\u0435 \u0441\u043e\u0445\u0440\u0430\u043d\u0435\u043d\u043e")})}).catch(function(e){var t=e.error;a.setState(Object(l.a)({},a.state,{isProcess:!1}),function(){a.props.showWarningAlert(t.message)})})},a.state={user:e.user,consumers:[],meters:[],place:{id:e.match.params.place_id},isLoaded:!1,isProcess:!1},a}return Object(h.a)(t,e),Object(m.a)(t,[{key:"componentDidMount",value:function(){var e=this;Promise.resolve().then(Object(B.a)(I.a.mark(function t(){var a,n,r,s,c;return I.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return a=e.state.user.token,n=e.state.place.id,t.next=4,j.getAllMetersNotInPlace(a);case 4:return r=t.sent,t.next=7,j.getAllConsumers(a);case 7:return s=t.sent,t.next=10,j.getPlaceById(a,n);case 10:c=t.sent,e.setState(Object(l.a)({},e.state,{isLoaded:!0,meters:c.meter?[].concat(Object(Se.a)(r),[c.meter]):r,consumers:s||[],place:c}));case 12:case"end":return t.stop()}},t,this)})),function(t){var a=t.error;e.setState(Object(l.a)({},e.state,{isLoaded:!0}),function(){e.props.showWarningAlert(a.message)})})}},{key:"render",value:function(){var e,t,a,n,s=this,c=this.state.place;return this.state.isLoaded?r.a.createElement("div",{className:"container"},r.a.createElement(k,this.props),r.a.createElement("div",{className:"row justify-content-center mt-3"},r.a.createElement("div",{className:"col-12 col-sm-12 col-md-8 col-md-offset-2 col-lg-6 col-lg-offset-3"},r.a.createElement("div",{className:"text-center font-weight-bold mb-5"},r.a.createElement("h3",null,"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u043c\u0435\u0441\u0442\u043e \u0443\u0441\u0442\u0430\u043d\u043e\u0432\u043a\u0438 \u0441\u0447\u0435\u0442\u0447\u0438\u043a\u0430")),r.a.createElement("form",null,r.a.createElement("div",{className:"form-group"},r.a.createElement("input",{className:"form-control",type:"text",placeholder:"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435 \u043c\u0435\u0441\u0442\u0430",required:!0,autoFocus:!0,defaultValue:c.name,ref:function(t){return e=t}})),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"cmbMeters"},"\u0421\u0447\u0435\u0442\u0447\u0438\u043a\u0438"),r.a.createElement("select",{className:"form-control",id:"cmbMeters",ref:function(e){return n=e},defaultValue:c.meter?c.meter.id:null},r.a.createElement("option",null),this.state.meters.map(function(e){return r.a.createElement("option",{key:"".concat(e.id),value:"".concat(e.id)},"".concat(e.number))}))),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"cmbConsumers"},"\u041f\u043e\u0442\u0440\u0435\u0431\u0438\u0442\u0435\u043b\u0438"),r.a.createElement("select",{className:"form-control",id:"cmbConsumers",ref:function(e){return a=e},defaultValue:c.consumer?c.consumer.id:null},r.a.createElement("option",null),this.state.consumers.map(function(e){return r.a.createElement("option",{key:"".concat(e.id),value:"".concat(e.id)},"".concat(e.name))}))),r.a.createElement("div",{className:"form-group form-check"},r.a.createElement("input",{type:"checkbox",className:"form-check-input",id:"cbIsSignNeed",required:!0,ref:function(e){return t=e},defaultChecked:c.isSignNeed}),r.a.createElement("label",{className:"form-check-label",htmlFor:"cbIsSignNeed"},"\u041f\u043e\u0434\u043f\u0438\u0441\u044c?")),r.a.createElement("div",{className:"form-group"},this.state.isProcess?r.a.createElement(_,{message:"\u0418\u0437\u043c\u0435\u043d\u0435\u043d\u0438\u0435...",large:!0}):r.a.createElement("button",{className:"btn btn-primary btn-block",onClick:function(r){r.preventDefault(),s.handleUpdatePlace(e.value,t.checked,a.value,n.value)}},"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c")))))):null}}]),t}(n.Component),Ie=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(u.a)(this,Object(d.a)(t).call(this,e))).handleClickYes=function(e){e.preventDefault();var t=a.state.user.token,n=a.state.place.id;j.deletePlaceById(t,n).then(function(e){e&&(a.props.showSuccessAlert("\u041c\u0435\u0441\u0442\u043e \u0443\u0434\u0430\u043b\u0435\u043d\u043e"),a.props.history.go(-2))}).catch(function(e){var t=e.error;a.props.showWarningAlert(t.message)})},a.handleClickNo=function(e){e.preventDefault(),a.props.history.goBack()},a.state={user:e.user,place:{id:e.match.params.place_id},isLoaded:!1},a}return Object(h.a)(t,e),Object(m.a)(t,[{key:"componentDidMount",value:function(){var e=this,t=this.state.user.token,a=this.state.place.id;j.getPlaceById(t,a).then(function(t){t?e.setState(Object(l.a)({},e.state,{place:t,isLoaded:!0})):(e.props.showWarningAlert("\u041c\u0435\u0441\u0442\u043e \u043d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d\u043e"),e.props.history.goBack())}).catch(function(t){var a=t.error;e.props.showWarningAlert(a.message),e.props.history.goBack()})}},{key:"render",value:function(){var e=this.state.place;return this.state.isLoaded?r.a.createElement("div",{className:"container pt-2"},r.a.createElement("div",{className:"border p-5"},r.a.createElement("div",{className:"mb-5"},r.a.createElement("p",{className:"h3 text-center"},"\u0423\u0434\u0430\u043b\u0438\u0442\u044c \u043c\u0435\u0441\u0442\u043e ".concat(e.name,"?"))),r.a.createElement("div",{className:"d-flex justify-content-between"},r.a.createElement("div",{className:"ml-5"},r.a.createElement("button",{className:"btn btn-success",onClick:this.handleClickYes},"Yes")),r.a.createElement("div",{className:"mr-5"},r.a.createElement("button",{className:"btn btn-danger",onClick:this.handleClickNo},"No"))))):null}}]),t}(n.Component),Be=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(u.a)(this,Object(d.a)(t).call(this,e))).loadItems=function(e){return Object(B.a)(I.a.mark(function t(){var n,r,s,c,o,i,m;return I.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,n=a.state,r=n.user.token,s=n.limit,t.next=4,j.act_01.count(r);case 4:if(!((c=t.sent)&&c.count>0)){t.next=13;break}return o=(e-1)*s,t.next=9,j.act_01.getAll(r,s,o);case 9:i=t.sent,a.setState(Object(l.a)({},a.state,{acts:i,totalItemsCount:c.count,activePage:e,isLoaded:!0})),t.next=14;break;case 13:a.setState(Object(l.a)({},a.state,{isLoaded:!0}));case 14:t.next=21;break;case 16:t.prev=16,t.t0=t.catch(0),m=t.t0.error,a.setState(Object(l.a)({},a.state,{isLoaded:!0})),a.props.showWarningAlert(m.message);case 21:case"end":return t.stop()}},t,this,[[0,16]])}))},a.handlerChangePage=function(e){Promise.resolve().then(a.loadItems(e)).catch(function(e){var t=e.error;a.props.showWarningAlert(t.message)})},a.downloadPdf=function(e){return function(t){t.preventDefault();var n=a.state.user.token;j.act_01.getPdfById(n,e).catch(function(e){var t=e.error;a.props.setAlert("warning",t.message)})}},a.state={user:e.user,acts:[],limit:30,activePage:1,totalItemsCount:0,isLoaded:!1},a}return Object(h.a)(t,e),Object(m.a)(t,[{key:"componentDidMount",value:function(){var e=this;Promise.resolve().then(this.loadItems(this.state.activePage)).catch(function(t){var a=t.error;e.props.showWarningAlert(a.message)})}},{key:"render",value:function(){return this.state.isLoaded?r.a.createElement("div",{className:"container justify-content-center"},r.a.createElement(k,this.props),r.a.createElement(_e,{items:this.state.acts,downloadPdf:this.downloadPdf}),this.state.totalItemsCount>this.state.limit?r.a.createElement(T.a,{hideDisabled:!0,activePage:this.state.activePage,itemsCountPerPage:this.state.limit,totalItemsCount:this.state.totalItemsCount,innerClass:"pagination justify-content-center",itemClass:"page-item",linkClass:"page-link",onChange:this.handlerChangePage}):null):r.a.createElement(_,null)}}]),t}(n.Component),_e=function(e){var t=e.items;return r.a.createElement("div",{className:"table-responsive"},r.a.createElement("table",{className:"table table-bordered table-hover table-sm table-responsive-sm"},r.a.createElement("thead",{className:"thead-dark"},r.a.createElement("tr",null,r.a.createElement("th",{scope:"col",className:"text-center"},"Id"),r.a.createElement("th",{scope:"col",className:"text-center"},"\u0414\u0430\u0442\u0430"),r.a.createElement("th",{scope:"col",className:"text-center"},"\u0418\u043d\u0441\u043f\u0435\u043a\u0442\u043e\u0440"),r.a.createElement("th",{scope:"col",className:"text-center"},"\u041c\u0435\u0441\u0442\u043e"),r.a.createElement("th",{scope:"col",className:"text-center"},"\u041f\u043e\u0442\u0440\u0435\u0431\u0438\u0442\u0435\u043b\u044c"),r.a.createElement("th",{scope:"col",className:"text-center"},"\u0421\u0447\u0435\u0442\u0447\u0438\u043a"),r.a.createElement("th",{scope:"col",className:"text-center"},"\u041f\u043e\u043a\u0430\u0437\u0430\u043d\u0438\u0435"),r.a.createElement("th",{scope:"col",className:"text-center"},r.a.createElement("i",{className:"fas fa-download"})))),r.a.createElement("tbody",{style:{fontSize:"0.85rem"}},t&&t.map(function(t){return r.a.createElement(Re,{key:"".concat(t.id),item:t,downloadPdf:e.downloadPdf})}))))},Re=function(e){var t=e.item;return r.a.createElement("tr",null,r.a.createElement("td",{className:"text-center"},r.a.createElement(y.a,{to:"/owner/reports/".concat(t.id)},t.id)),r.a.createElement("td",{className:"text-center"},pe(he(t.date))),r.a.createElement("td",{className:"text-center"},t.inspector),r.a.createElement("td",{className:"text-center"},t.place),r.a.createElement("td",{className:"text-center"},t.consumer),r.a.createElement("td",{className:"text-center"},t.meter),r.a.createElement("td",{className:"text-center"},t.current_value),r.a.createElement("td",{className:"text-center"},r.a.createElement("a",{className:"text-secondary",onClick:e.downloadPdf(t.id),href:"api/v1/doc/act_01/".concat(t.id,"/pdf"),download:"act-".concat(Date.now(),".pdf")},r.a.createElement("i",{className:"fas fa-download"}))))},Te=Be,De=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(u.a)(this,Object(d.a)(t).call(this,e))).downloadPdf=function(e){return function(t){t.preventDefault();var n=a.state.user.token;j.act_01.getPdfById(n,e).catch(function(e){var t=e.error;a.props.setAlert("warning",t.message)})}},a.state={user:e.user,act:{id:e.match.params.id},isLoaded:!1},a}return Object(h.a)(t,e),Object(m.a)(t,[{key:"componentDidMount",value:function(){var e=this,t=this.state.user.token,a=this.state.act.id;j.act_01.getById(t,a).then(function(t){t?e.setState(Object(l.a)({},e.state,{act:t,isLoaded:!0})):e.setState(Object(l.a)({},e.state,{isLoaded:!1}),function(){e.props.showWarningAlert("\u041e\u0442\u0447\u0435\u0442 \u043d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d"),e.props.history.goBack()})}).catch(function(t){t.error;e.setState(Object(l.a)({},e.state,{isLoaded:!1}),function(){e.props.showWarningAlert("\u041e\u0442\u0447\u0435\u0442 \u043d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d"),e.props.history.goBack()})})}},{key:"render",value:function(){if(!this.state.isLoaded)return null;var e=this.state,t=e.user,a=e.act;return r.a.createElement("div",{className:"container"},r.a.createElement(k,Object.assign({},this.props,{user:t}),r.a.createElement(y.a,{className:"nav-link",to:"/owner/reports/".concat(a.id,"/update")},"\u0418\u0437\u043c\u0435\u043d\u0438\u0442\u044c"),r.a.createElement(y.a,{className:"nav-link",to:"/owner/reports/".concat(a.id,"/delete")},"\u0423\u0434\u0430\u043b\u0438\u0442\u044c"),r.a.createElement(y.a,{className:"nav-link",to:"",onClick:this.downloadPdf(a.id)},"\u0421\u043a\u0430\u0447\u0430\u0442\u044c")),r.a.createElement("h3",{className:"text-center mb-2"},"\u041e\u0442\u0447\u0435\u0442 \u2116 ".concat(a.id)),r.a.createElement("div",{className:"table-responsive"},r.a.createElement("table",{className:"table table-hover table-sm border-bottom"},r.a.createElement("tbody",null,r.a.createElement("tr",null,r.a.createElement("td",null,r.a.createElement("span",{className:"font-weight-bold"},"Id")),r.a.createElement("td",null,r.a.createElement("span",{className:"font-weight-bold"},a.id))),r.a.createElement("tr",null,r.a.createElement("td",null,r.a.createElement("span",{className:"font-weight-bold"},"\u0414\u0430\u0442\u0430")),r.a.createElement("td",null,r.a.createElement("span",{className:"font-weight-bold"},pe(a.date)))),r.a.createElement("tr",null,r.a.createElement("td",null,r.a.createElement("span",{className:"font-weight-bold"},"\u0418\u043d\u0441\u043f\u0435\u043a\u0442\u043e\u0440")),r.a.createElement("td",null,r.a.createElement("span",{className:"font-weight-bold"},a.inspector))),r.a.createElement("tr",null,r.a.createElement("td",null,r.a.createElement("span",{className:"font-weight-bold"},"\u041f\u043e\u0442\u0440\u0435\u0431\u0438\u0442\u0435\u043b\u044c")),r.a.createElement("td",null,r.a.createElement("span",{className:"font-weight-bold"},a.consumer))),r.a.createElement("tr",null,r.a.createElement("td",null,r.a.createElement("span",{className:"font-weight-bold"},"\u041c\u0435\u0441\u0442\u043e")),r.a.createElement("td",null,r.a.createElement("span",{className:"font-weight-bold"},a.place))),r.a.createElement("tr",null,r.a.createElement("td",null,r.a.createElement("span",{className:"font-weight-bold"},"\u0421\u0447\u0435\u0442\u0447\u0438\u043a")),r.a.createElement("td",null,r.a.createElement("span",{className:"font-weight-bold"},a.meter))),r.a.createElement("tr",null,r.a.createElement("td",null,r.a.createElement("span",{className:"font-weight-bold"},"\u041f\u043e\u0434\u043f\u0438\u0441\u044c")),r.a.createElement("td",null,r.a.createElement("span",{className:"font-weight-bold"},a.ConsumerSignId?"\u0414\u0430":"\u041d\u0435\u0442"))),r.a.createElement("tr",{className:"table-success"},r.a.createElement("td",{colSpan:"2"},r.a.createElement("span",{className:"font-weight-bold"},"\u041f\u0440\u0435\u0434\u044b\u0434\u0443\u0449\u0438\u0435 \u043f\u043e\u043a\u0430\u0437\u0430\u043d\u0438\u044f:"))),r.a.createElement("tr",null,r.a.createElement("td",null,r.a.createElement("span",{className:"font-weight-bold"},"\u0414\u0430\u0442\u0430")),r.a.createElement("td",null,r.a.createElement("span",{className:"font-weight-bold"},null!==a.last_date?pe(a.last_date):"---"))),r.a.createElement("tr",null,r.a.createElement("td",null,r.a.createElement("span",{className:"font-weight-bold"},"\u041f\u043e\u043a\u0430\u0437\u0430\u043d\u0438\u0435")),r.a.createElement("td",null,r.a.createElement("span",{className:"font-weight-bold"},null!==a.last_value?a.last_value:"---"))),r.a.createElement("tr",{className:"table-danger"},r.a.createElement("td",{colSpan:"2"},r.a.createElement("span",{className:"font-weight-bold"},"\u0422\u0435\u043a\u0443\u0449\u0438\u0435 \u043f\u043e\u043a\u0430\u0437\u0430\u043d\u0438\u044f:"))),r.a.createElement("tr",null,r.a.createElement("td",null,r.a.createElement("span",{className:"font-weight-bold"},"\u0414\u0430\u0442\u0430")),r.a.createElement("td",null,r.a.createElement("span",{className:"font-weight-bold"},null!==a.current_date?pe(a.current_date):"---"))),r.a.createElement("tr",null,r.a.createElement("td",null,r.a.createElement("span",{className:"font-weight-bold"},"\u041f\u043e\u043a\u0430\u0437\u0430\u043d\u0438\u0435")),r.a.createElement("td",null,r.a.createElement("span",{className:"font-weight-bold"},null!==a.current_value?a.current_value:"---"))),r.a.createElement("tr",{className:"table-info"},r.a.createElement("td",null,r.a.createElement("span",{className:"font-weight-bold"},"\u0418\u0422\u041e\u0413\u041e \u043f\u043e\u0442\u0440\u0435\u0431\u043b\u0435\u043d\u0438\u0435")),r.a.createElement("td",null,r.a.createElement("span",{className:"font-weight-bold"},null!==a.current_value&&null!==a.last_value?a.current_value-a.last_value:null!==a.current_value?a.current_value:null)))))))}}]),t}(n.Component),We=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(u.a)(this,Object(d.a)(t).call(this,e))).handleUpdateReport=function(e){var t=a.state.act;if(Number.isNaN(e)||e<0)return a.props.showWarningAlert("\u041d\u0435\u043a\u043e\u0440\u0440\u0435\u043a\u0442\u043d\u043e\u0435 \u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435 \u043f\u043e\u043a\u0430\u0437\u0430\u043d\u0438\u044f \u0441\u0447\u0435\u0442\u0447\u0438\u043a\u0430");if((null!==t.last_value||void 0!==t.last_value)&&e<Number(t.last_value))return a.props.showWarningAlert("\u041d\u0435\u043a\u043e\u0440\u0440\u0435\u043a\u0442\u043d\u043e\u0435 \u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435 \u043f\u043e\u043a\u0430\u0437\u0430\u043d\u0438\u044f \u0441\u0447\u0435\u0442\u0447\u0438\u043a\u0430");var n=a.state.user.token,r=a.state.act.id;a.setState(Object(l.a)({},a.state,{isProcess:!0})),j.act_01.updateById(n,r,e).then(function(e){e&&e.done?j.act_01.sendEmailById(n,r).then(function(e){a.setState(Object(l.a)({},a.state,{isProcess:!1}),function(){a.props.showSuccessAlert("\u041e\u0442\u0447\u0435\u0442 \u0438\u0437\u043c\u0435\u043d\u0435\u043d \u0438 \u043e\u0442\u043f\u0440\u0430\u0432\u043b\u0435\u043d."),a.props.history.goBack()})}).catch(function(e){var t=e.error;a.setState(Object(l.a)({},a.state,{isProcess:!1}),function(){a.props.showWarningAlert("\u041e\u0442\u0447\u0435\u0442 \u0438\u0437\u043c\u0435\u043d\u0435\u043d, \u043d\u043e \u043d\u0435 \u043e\u0442\u043f\u0440\u0430\u0432\u043b\u0435\u043d. \n"+t.message),a.props.history.goBack()})}):a.setState(Object(l.a)({},a.state,{isProcess:!1}),function(){a.props.showWarningAlert("\u041d\u0435\u0443\u0434\u0430\u043b\u043e\u0441\u044c \u0438\u0437\u043c\u0435\u043d\u0438\u0442\u044c \u043e\u0442\u0447\u0435\u0442")})}).catch(function(e){var t=e.error;a.setState(Object(l.a)({},a.state,{isProcess:!1}),function(){a.props.showWarningAlert(t.message)})})},a.state={user:e.user,act:{id:e.match.params.id},isLoaded:!1,isProcess:!1},a}return Object(h.a)(t,e),Object(m.a)(t,[{key:"componentDidMount",value:function(){var e=this,t=this.state.user.token,a=this.state.act.id;j.act_01.getById(t,a).then(function(t){t?e.setState(Object(l.a)({},e.state,{act:t,isLoaded:!0})):(e.props.showWarningAlert("\u041e\u0442\u0447\u0435\u0442 \u043d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d"),e.props.history.goBack())}).catch(function(t){var a=t.error;e.props.showWarningAlert(a.message),e.props.history.goBack()})}},{key:"render",value:function(){var e=this;if(!this.state.isLoaded)return null;var t,a=this.state.act;return r.a.createElement("div",{className:"container"},r.a.createElement(k,this.props),r.a.createElement("div",{className:"row justify-content-center"},r.a.createElement("div",{className:"col-12 col-sm-12 col-md-8 col-md-offset-2 col-lg-6 col-lg-offset-3"},r.a.createElement("div",{className:"text-center font-weight-bold mb-5"},r.a.createElement("h3",null,"\u0418\u0437\u043c\u0435\u043d\u0438\u0442\u044c \u043f\u043e\u043a\u0430\u0437\u0430\u043d\u0438\u044f")),r.a.createElement("form",null,r.a.createElement("div",{className:"form-group"},r.a.createElement("input",{className:"form-control",type:"number",placeholder:"\u041f\u043e\u043a\u0430\u0437\u0430\u043d\u0438\u044f \u0441\u0447\u0435\u0442\u0447\u0438\u043a\u0430",required:!0,ref:function(e){return t=e},defaultValue:a.current_value})),r.a.createElement("div",{className:"form-group"},this.state.isProcess?r.a.createElement(_,{message:"\u0418\u0437\u043c\u0435\u043d\u0435\u043d\u0438\u0435 \u043f\u043e\u043a\u0430\u0437\u0430\u043d\u0438\u0439...",large:!0}):r.a.createElement("button",{className:"btn btn-primary btn-block",onClick:function(a){a.preventDefault(),e.handleUpdateReport(t.value)}},"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c"))))))}}]),t}(n.Component),ze=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(u.a)(this,Object(d.a)(t).call(this,e))).handleClickYes=function(e){e.preventDefault();var t=a.state.user.token,n=a.state.act.id;j.act_01.deletetById(t,n).then(function(e){e&&e.done&&(a.props.showSuccessAlert("\u041e\u0442\u0447\u0435\u0442 \u0443\u0434\u0430\u043b\u0435\u043d"),a.props.history.go(-2))}).catch(function(e){var t=e.error;a.props.showWarningAlert(t.message)})},a.handleClickNo=function(e){e.preventDefault(),a.props.history.goBack()},a.state={user:e.user,act:{id:e.match.params.id},isLoaded:!1},a}return Object(h.a)(t,e),Object(m.a)(t,[{key:"componentDidMount",value:function(){var e=this,t=this.state.user.token,a=this.state.act.id;j.act_01.getById(t,a).then(function(t){t?e.setState(Object(l.a)({},e.state,{act:t,isLoaded:!0})):e.setState(Object(l.a)({},e.state,{isLoaded:!1}),function(){e.props.showWarningAlert("\u041e\u0442\u0447\u0435\u0442 \u043d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d"),e.props.history.goBack()})}).catch(function(t){var a=t.error;e.setState(Object(l.a)({},e.state,{isLoaded:!1}),function(){e.props.showWarningAlert(a.message),e.props.history.goBack()})})}},{key:"render",value:function(){var e=this.state.act.id;return this.state.isLoaded?r.a.createElement("div",{className:"container pt-2"},r.a.createElement("div",{className:"border p-5"},r.a.createElement("div",{className:"mb-5"},r.a.createElement("p",{className:"h3 text-center"},"\u0423\u0434\u0430\u043b\u0438\u0442\u044c \u043e\u0442\u0447\u0435\u0442 \u2116 ".concat(e,"?"))),r.a.createElement("div",{className:"d-flex justify-content-between"},r.a.createElement("div",{className:"ml-5"},r.a.createElement("button",{className:"btn btn-success",onClick:this.handleClickYes},"Yes")),r.a.createElement("div",{className:"mr-5"},r.a.createElement("button",{className:"btn btn-danger",onClick:this.handleClickNo},"No"))))):null}}]),t}(n.Component),Me=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(u.a)(this,Object(d.a)(t).call(this,e))).downloadXlsx=function(e){return function(t){t.preventDefault();var n=a.state.user.token;j.downloadXlsxRegisterById(n,e).catch(function(e){var t=e.error;a.props.setAlert("warning",t.message)})}},a.downloadXlsxAllRegisters=function(e){e.preventDefault();var t=a.state.user.token;j.downloadXlsxAllRegisters(t).catch(function(e){var t=e.error;a.props.setAlert("warning",t.message)})},a.state={user:e.user,registers:[],isLoaded:!1},a}return Object(h.a)(t,e),Object(m.a)(t,[{key:"componentDidMount",value:function(){var e=this,t=this.state.user.token;j.getAllRegisters(t).then(function(t){t?e.setState(Object(l.a)({},e.state,{registers:t,isLoaded:!0})):e.setState(Object(l.a)({},e.state,{isLoaded:!0}),function(){e.props.showWarningAlert("\u0420\u0435\u0435\u0441\u0442\u0440\u044b \u043d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d\u044b")})}).catch(function(t){var a=t.error;e.setState(Object(l.a)({},e.state,{isLoaded:!0}),function(){e.props.showWarningAlert(a.message)})})}},{key:"render",value:function(){return this.state.isLoaded?r.a.createElement("div",{className:"container justify-content-center"},r.a.createElement(k,this.props,r.a.createElement(y.a,{className:"nav-link",to:"/owner/registers/create"},"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c")),r.a.createElement(Ge,{registers:this.state.registers,downloadXlsx:this.downloadXlsx,downloadXlsxAllRegisters:this.downloadXlsxAllRegisters})):r.a.createElement(_,null)}}]),t}(n.Component),Ge=function(e){var t=e.registers;return r.a.createElement("div",{className:"table-responsive"},r.a.createElement("table",{className:"table table-bordered table-hover table-sm"},r.a.createElement("thead",{className:"thead-dark"},r.a.createElement("tr",null,r.a.createElement("th",{scope:"col",className:"text-center"},"Id"),r.a.createElement("th",{scope:"col",className:"text-center"},"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435"),r.a.createElement("th",{scope:"col",className:"text-center"},"\u0413\u0440\u0443\u043f\u043f\u043e\u0432\u043e\u0439 \u0430\u0431\u043e\u043d\u0435\u043d\u0442"),r.a.createElement("th",{className:"text-center"},r.a.createElement("a",{className:"text-light",onClick:e.downloadXlsxAllRegisters,href:"api/v1/registers/xlsx",download:"register-all-".concat(Date.now(),".xlsx")},r.a.createElement("i",{className:"fas fa-file-excel"}))))),r.a.createElement("tbody",{style:{fontSize:"0.85rem"}},t&&t.map(function(t){return r.a.createElement(Ye,{key:"".concat(t.id),register:t,downloadXlsx:e.downloadXlsx})}))))},Ye=function(e){var t=e.register;return r.a.createElement("tr",null,r.a.createElement("td",{className:"text-center"},r.a.createElement(y.a,{to:"/owner/registers/".concat(t.id)},t.id)),r.a.createElement("td",{className:"text-center"},r.a.createElement(y.a,{to:"/owner/registers/".concat(t.id)},t.name)),r.a.createElement("td",{className:"text-center"},t.group_abonent&&r.a.createElement(y.a,{to:"/owner/places/".concat(t.group_abonent.id)},t.group_abonent.name)),r.a.createElement("td",{className:"text-center"},r.a.createElement("a",{className:"text-secondary",onClick:e.downloadXlsx(t.id),href:"api/v1/registers/".concat(t.id,"/xlsx"),download:"register-".concat(t.id,"-").concat(Date.now(),".xlsx")},r.a.createElement("i",{className:"fas fa-file-excel"}))))},Xe=Me,qe=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(u.a)(this,Object(d.a)(t).call(this,e))).handleCreateRegister=function(e,t,n){var r=a.state.user.token;a.setState(Object(l.a)({},a.state,{processing:!0})),j.createRegister(r,e,t,n).then(function(e){e?a.setState(Object(l.a)({},a.state,{processing:!1}),function(){a.props.showSuccessAlert("\u0420\u0435\u0433\u0438\u0441\u0442\u043e\u0440 \u0441\u043e\u0437\u0434\u0430\u043d"),a.props.history.goBack()}):a.setState(Object(l.a)({},a.state,{processing:!1}),function(){a.props.showWarningAlert("\u0420\u0435\u0433\u0438\u0441\u0442\u043e\u0440 \u043d\u0435 \u0441\u043e\u0437\u0434\u0430\u043d")})}).catch(function(e){var t=e.error;a.setState(Object(l.a)({},a.state,{processing:!1}),function(){a.props.showWarningAlert(t.message)})})},a.state={user:e.user,places:[],group_abonent_id:null,sub_abonentes:[],isLoaded:!1,processing:!1},a}return Object(h.a)(t,e),Object(m.a)(t,[{key:"componentDidMount",value:function(){var e=this,t=this.state.user.token;j.getAllPlaces(t).then(function(t){t?e.setState(Object(l.a)({},e.state,{places:t,isLoaded:!0})):e.setState(Object(l.a)({},e.state,{isLoaded:!0}),function(){e.props.showWarningAlert("\u041c\u0435\u0441\u0442\u0430 \u043d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d\u044b")})}).catch(function(t){var a=t.error;e.setState(Object(l.a)({},e.state,{isLoaded:!0}),function(){e.props.showWarningAlert(a.message)})})}},{key:"render",value:function(){var e,t,a,n,s=this;if(!this.state.isLoaded)return r.a.createElement(_,null);return r.a.createElement("div",{className:"container justify-content-center"},r.a.createElement(k,this.props),r.a.createElement("div",{className:"row justify-content-center mt-3"},r.a.createElement("div",{className:"col-12 col-sm-12 col-md-8 col-md-offset-2 col-lg-6 col-lg-offset-3"},r.a.createElement("div",{className:"text-center font-weight-bold mb-2"},r.a.createElement("h3",null,"\u0421\u043e\u0437\u0434\u0430\u0442\u044c \u0440\u0435\u0433\u0438\u0441\u0442\u043e\u0440")),r.a.createElement("form",null,r.a.createElement("div",{className:"form-group"},r.a.createElement("input",{className:"form-control",type:"text",placeholder:"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435",required:!0,autoFocus:!0,ref:function(t){return e=t}})),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"group-abonent"},"\u0413\u0440\u0443\u043f\u043f\u043e\u0432\u043e\u0439 \u0430\u0431\u043e\u043d\u0435\u043d\u0442"),r.a.createElement("select",{className:"form-control",id:"group-abonent",ref:function(e){return t=e},onChange:function(e){console.log(typeof t.value,t.value);var a="0"!==t.value?t.value:null;s.setState(Object(l.a)({},s.state,{group_abonent_id:a}))}},r.a.createElement("option",{value:"0"}),this.state.places.filter(function(e){return!s.state.sub_abonentes.includes(Number(e.id).toString())}).map(function(e){return r.a.createElement("option",{key:e.id,value:e.id},e.name)}))),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"group-abonent"},"\u0412\u044b\u0431\u043e\u0440 \u0441\u0443\u0431\u0430\u0431\u043e\u043d\u0435\u043d\u0442\u043e\u0432"),r.a.createElement("select",{multiple:!0,className:"form-control",id:"group-abonent",ref:function(e){return a=e},onDoubleClick:function(e){console.log(a.value),s.setState(Object(l.a)({},s.state,{sub_abonentes:[].concat(Object(Se.a)(s.state.sub_abonentes),[a.value])}))}},this.state.places.filter(function(e){return Number(e.id).toString()!==s.state.group_abonent_id&&!s.state.sub_abonentes.includes(Number(e.id).toString())}).map(function(e){return r.a.createElement("option",{key:e.id,value:e.id},e.name)})),r.a.createElement("button",{className:"btn btn-success btn-block",onClick:function(e){e.preventDefault();for(var t=[],n=a.options,r=0;r<n.length;r++)n[r].selected&&t.push(n[r].value);t.length>0&&s.setState(Object(l.a)({},s.state,{sub_abonentes:[].concat(Object(Se.a)(s.state.sub_abonentes),t)}))}},"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c")),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"sub-abonent"},"\u0421\u043f\u0438\u0441\u043e\u043a \u0441\u0443\u0431\u0430\u0431\u043e\u043d\u0435\u043d\u0442\u043e\u0432"),r.a.createElement("select",{multiple:!0,className:"form-control",id:"sub-abonent",ref:function(e){return n=e}},this.state.places.filter(function(e){return s.state.sub_abonentes.includes(Number(e.id).toString())}).map(function(e){return r.a.createElement("option",{key:e.id,value:e.id},e.name)})),r.a.createElement("button",{className:"btn btn-danger btn-block",onClick:function(e){e.preventDefault();for(var t=[],a=n.options,r=0;r<a.length;r++)a[r].selected&&t.push(a[r].value);var c=s.state.sub_abonentes.filter(function(e){return!t.includes(e)});s.setState(Object(l.a)({},s.state,{sub_abonentes:Object(Se.a)(c)}))}},"\u0423\u0431\u0440\u0430\u0442\u044c")),this.state.processing&&r.a.createElement(_,null),r.a.createElement("div",{className:"form-group"},r.a.createElement("button",{className:"btn btn-primary btn-block",onClick:function(t){t.preventDefault(),s.handleCreateRegister(e.value,s.state.group_abonent_id,s.state.sub_abonentes)}},"\u0421\u043e\u0437\u0434\u0430\u0442\u044c"))))))}}]),t}(n.Component),Ue=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(u.a)(this,Object(d.a)(t).call(this,e))).downloadXlsx=function(e){return function(t){t.preventDefault();var n=a.state.user.token;j.downloadXlsxRegisterById(n,e).catch(function(e){var t=e.error;a.props.setAlert("warning",t.message)})}},a.state={user:e.user,register:{id:e.match.params.register_id},consumptionGroup:0,consumptionSubs:0,isLoaded:!1},a}return Object(h.a)(t,e),Object(m.a)(t,[{key:"componentDidMount",value:function(){var e=this,t=this.state.user.token,a=this.state.register.id;j.getRegisterById(t,a).then(function(t){if(t){console.log(t);var a=He(t.group_abonent),n=Ke(t.sub_abonents);e.setState(Object(l.a)({},e.state,{consumptionGroup:a,consumptionSubs:n,register:t,isLoaded:!0}))}else e.setState(Object(l.a)({},e.state,{isLoaded:!0}),function(){e.props.showWarningAlert("\u0420\u0435\u0435\u0441\u0442\u0440 \u043d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d")})}).catch(function(t){console.log(t),e.props.showWarningAlert(t.error&&t.error.message?t.error.message:t),e.props.history.goBack()})}},{key:"render",value:function(){if(!this.state.isLoaded)return r.a.createElement(_,null);var e=this.state.register;return r.a.createElement("div",{className:"container justify-content-center"},r.a.createElement(k,this.props,r.a.createElement(y.a,{className:"nav-link",to:"/owner/registers/".concat(this.state.register.id,"/update")},"\u0418\u0437\u043c\u0435\u043d\u0438\u0442\u044c"),r.a.createElement(y.a,{className:"nav-link",to:"/owner/registers/".concat(this.state.register.id,"/delete")},"\u0423\u0434\u0430\u043b\u0438\u0442\u044c"),r.a.createElement(y.a,{className:"nav-link",to:"/api/v1/registers/".concat(e.id,"/xlsx"),onClick:this.downloadXlsx(e.id)},"\u0421\u043a\u0430\u0447\u0430\u0442\u044c")),r.a.createElement("h3",{className:"text-center mb-2"},"\u0420\u0435\u0435\u0441\u0442\u0440"),r.a.createElement("div",{className:"table-responsive"},r.a.createElement("table",{className:"table table-hover table-sm border-bottom"},r.a.createElement("tbody",null,r.a.createElement("tr",null,r.a.createElement("td",null,r.a.createElement("span",{className:"font-weight-bold"},"Id")),r.a.createElement("td",null,r.a.createElement("span",{className:"font-weight-bold"},e.id))),r.a.createElement("tr",null,r.a.createElement("td",null,r.a.createElement("span",{className:"font-weight-bold"},"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435")),r.a.createElement("td",null,r.a.createElement("span",{className:"font-weight-bold"},e.name))),r.a.createElement("tr",null,r.a.createElement("td",null,r.a.createElement("span",{className:"font-weight-bold"},"\u041f\u043e\u0442\u0440\u0435\u0431\u043b\u0435\u043d\u0438\u0435: \u0413\u0440\u0443\u043f\u043f\u043e\u0432\u043e\u0439")),r.a.createElement("td",null,r.a.createElement("span",{className:"font-weight-bold"},this.state.consumptionGroup))),r.a.createElement("tr",null,r.a.createElement("td",null,r.a.createElement("span",{className:"font-weight-bold"},"\u041f\u043e\u0442\u0440\u0435\u0431\u043b\u0435\u043d\u0438\u0435: \u0421\u0443\u0431\u0430\u0431\u043e\u043d\u0435\u043d\u0442\u044b")),r.a.createElement("td",null,r.a.createElement("span",{className:"font-weight-bold"},this.state.consumptionSubs))),r.a.createElement("tr",null,r.a.createElement("td",null,r.a.createElement("span",{className:"font-weight-bold"},"\u041f\u043e\u0442\u0435\u0440\u0438")),r.a.createElement("td",null,r.a.createElement("span",{className:"font-weight-bold"},this.state.consumptionGroup-this.state.consumptionSubs)))))),r.a.createElement("h3",{className:"text-center"},"\u0413\u0440\u0443\u043f\u043f\u043e\u0432\u043e\u0439 \u0430\u0431\u043e\u043d\u0435\u043d\u0442"),r.a.createElement(Fe,{items:this.state.register.group_abonent?[this.state.register.group_abonent]:[]}),r.a.createElement("h3",{className:"text-center"},"\u0421\u0443\u0431\u0430\u0431\u043e\u043d\u0435\u043d\u0442\u044b"),r.a.createElement(Fe,{items:this.state.register.sub_abonents||[]}))}}]),t}(n.Component),Fe=function(e){var t=e.items;return r.a.createElement("div",{className:"table-responsive"},r.a.createElement("table",{className:"table table-bordered table-hover table-sm"},r.a.createElement("thead",{className:"thead-dark"},r.a.createElement("tr",null,r.a.createElement("th",{scope:"col",className:"text-center align-middle"},"Id"),r.a.createElement("th",{scope:"col",className:"text-center align-middle"},"\u041c\u0435\u0441\u0442\u043e"),r.a.createElement("th",{scope:"col",className:"text-center align-middle"},"\u041f\u043e\u0442\u0440\u0435\u0431\u0438\u0442\u0435\u043b\u044c"),r.a.createElement("th",{scope:"col",className:"text-center align-middle"},"\u0421\u0447\u0435\u0442\u0447\u0438\u043a"),r.a.createElement("th",{scope:"col",className:"text-center align-middle"},"\u041f\u0440\u0435\u0434\u044b\u0434\u0443\u0449\u0438\u0435 \u043f\u043e\u043a\u0430\u0437\u0430\u043d\u0438\u044f"),r.a.createElement("th",{scope:"col",className:"text-center align-middle"},"\u0422\u0435\u043a\u0443\u0449\u0438\u0435 \u043f\u043e\u043a\u0430\u0437\u0430\u043d\u0438\u044f"),r.a.createElement("th",{scope:"col",className:"text-center align-middle"},"\u041f\u043e\u0442\u0440\u0435\u0431\u043b\u0435\u043d\u0438\u0435"))),r.a.createElement("tbody",{style:{fontSize:"0.85rem"}},t&&t.map(function(e){return r.a.createElement(Je,{key:e.id,item:e})}))))},Je=function(e){var t=e.item;return t?r.a.createElement(r.a.Fragment,null,r.a.createElement("tr",null,r.a.createElement("td",{rowSpan:"2",className:"text-center align-middle"},t.id),r.a.createElement("td",{rowSpan:"2",className:"text-center align-middle"},r.a.createElement(y.a,{to:"/owner/places/".concat(t.id)},t.name)),r.a.createElement("td",{rowSpan:"2",className:"text-center align-middle"},t.consumer&&r.a.createElement(y.a,{to:"/owner/consumers/".concat(t.consumer.id)},t.consumer.name)),r.a.createElement("td",{rowSpan:"2",className:"text-center align-middle"},t.meter&&r.a.createElement(y.a,{to:"/owner/meters/".concat(t.meter.id)},t.meter.number)),r.a.createElement("td",{className:"text-center align-middle"},t.meter&&t.meter.data[1]?pe(t.meter.data[1].date):null),r.a.createElement("td",{className:"text-center align-middle"},t.meter&&t.meter.data[0]?pe(t.meter.data[0].date):null),r.a.createElement("td",{rowSpan:"2",className:"text-center align-middle"},function(){var e=t.meter&&t.meter.data[1]?t.meter.data[1].value:null,a=t.meter&&t.meter.data[0]?t.meter.data[0].value:null;return Ve(e,a)}())),r.a.createElement("tr",null,r.a.createElement("td",{className:"text-center align-middle"},t.meter&&t.meter.data[1]?t.meter.data[1].value:null),r.a.createElement("td",{className:"text-center align-middle"},t.meter&&t.meter.data[0]?t.meter.data[0].value:null))):null},Ve=function(e,t){return e&&t&&!isNaN(e)&&!isNaN(t)?t-e:t&&!isNaN(t)?t:null},He=function(e){if(!e)return null;var t=e.meter,a=t&&t.data[1]?t.data[1].value:null,n=t&&t.data[0]?t.data[0].value:null;return Ve(a,n)},Ke=function(e){if(!e)return null;var t=0;return e.forEach(function(e){var a=e.meter,n=a&&a.data[1]?a.data[1].value:null,r=a&&a.data[0]?a.data[0].value:null,s=Ve(n,r);null!==s&&(t+=s)}),t},Qe=Ue,Ze=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(u.a)(this,Object(d.a)(t).call(this,e))).componentDidMount=Object(B.a)(I.a.mark(function e(){var t,n,r,s,c,o,i;return I.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t=a.state.user.token,n=a.state.register.id,e.next=5,j.getRegisterById(t,n);case 5:return r=e.sent,e.next=8,j.getAllPlaces(t);case 8:if(s=e.sent,!r||!s){e.next=15;break}c=r.group_abonent?"".concat(r.group_abonent.id):null,o=r.sub_abonents?r.sub_abonents.map(function(e){return"".concat(e.id)}):[],a.setState(Object(l.a)({},a.state,{register:r,places:s,group_abonent_id:c,sub_abonents:o,isLoaded:!0})),e.next=16;break;case 15:throw new Error({error:{error:{message:"\u041d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d \u0440\u0435\u0435\u0441\u0442\u0440 \u0438\u043b\u0438 \u043c\u0435\u0441\u0442\u0430"}}});case 16:e.next=22;break;case 18:e.prev=18,e.t0=e.catch(0),i=e.t0.error,a.setState(Object(l.a)({},a.state,{isLoaded:!0}),function(){a.props.showWarningAlert(i.message)});case 22:case"end":return e.stop()}},e,this,[[0,18]])})),a.handleUpdateRegister=function(e,t,n){var r=a.state.user.token,s=a.state.register.id;a.setState(Object(l.a)({},a.state,{processing:!0}),function(){j.updateRegisterById(r,s,e,t,n).then(function(e){e&&e.done?a.setState(Object(l.a)({},a.state,{processing:!1}),function(){a.props.showSuccessAlert("\u0420\u0435\u0433\u0438\u0441\u0442\u043e\u0440 \u0438\u043c\u0435\u043d\u0435\u043d"),a.props.history.goBack()}):a.setState(Object(l.a)({},a.state,{processing:!1}),function(){a.props.showWarningAlert("\u0420\u0435\u0433\u0438\u0441\u0442\u043e\u0440 \u043d\u0435 \u0438\u0437\u043c\u0435\u043d\u0435\u043d")})}).catch(function(e){var t=e.error;a.setState(Object(l.a)({},a.state,{processing:!1}),function(){a.props.showWarningAlert(t.message)})})})},a.state={user:e.user,register:{id:e.match.params.register_id},places:[],group_abonent_id:null,sub_abonents:[],isLoaded:!1,processing:!1},a}return Object(h.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){var e,t,a,n,s=this;if(!this.state.isLoaded)return r.a.createElement(_,null);console.log(this.state);return r.a.createElement("div",{className:"container justify-content-center"},r.a.createElement(k,this.props),r.a.createElement("div",{className:"row justify-content-center mt-3"},r.a.createElement("div",{className:"col-12 col-sm-12 col-md-8 col-md-offset-2 col-lg-6 col-lg-offset-3"},r.a.createElement("div",{className:"text-center font-weight-bold mb-2"},r.a.createElement("h3",null,"\u0418\u0437\u043c\u0435\u043d\u0438\u0442\u044c \u0440\u0435\u0433\u0438\u0441\u0442\u043e\u0440")),r.a.createElement("form",null,r.a.createElement("div",{className:"form-group"},r.a.createElement("input",{className:"form-control",type:"text",placeholder:"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435",required:!0,autoFocus:!0,ref:function(t){return e=t},defaultValue:this.state.register.name})),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"group-abonent"},"\u0413\u0440\u0443\u043f\u043f\u043e\u0432\u043e\u0439 \u0430\u0431\u043e\u043d\u0435\u043d\u0442"),r.a.createElement("select",{className:"form-control",id:"group-abonent",ref:function(e){return t=e},onChange:function(e){var a="0"!==t.value?t.value:null;s.setState(Object(l.a)({},s.state,{group_abonent_id:a}))},defaultValue:this.state.register.group_abonent?this.state.register.group_abonent.id:null},r.a.createElement("option",{value:"0"}),this.state.places.filter(function(e){return!s.state.sub_abonents.includes(Number(e.id).toString())}).map(function(e){return r.a.createElement("option",{key:e.id,value:e.id},e.name)}))),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"group-abonent"},"\u0412\u044b\u0431\u043e\u0440 \u0441\u0443\u0431\u0430\u0431\u043e\u043d\u0435\u043d\u0442\u043e\u0432"),r.a.createElement("select",{multiple:!0,className:"form-control",id:"group-abonent",ref:function(e){return a=e},onDoubleClick:function(e){console.log(a.value),s.setState(Object(l.a)({},s.state,{sub_abonents:[].concat(Object(Se.a)(s.state.sub_abonents),[a.value])}))}},this.state.places.filter(function(e){return Number(e.id).toString()!==s.state.group_abonent_id&&!s.state.sub_abonents.includes(Number(e.id).toString())}).map(function(e){return r.a.createElement("option",{key:e.id,value:e.id},e.name)})),r.a.createElement("button",{className:"btn btn-success btn-block",onClick:function(e){e.preventDefault();for(var t=[],n=a.options,r=0;r<n.length;r++)n[r].selected&&t.push(n[r].value);t.length>0&&s.setState(Object(l.a)({},s.state,{sub_abonents:[].concat(Object(Se.a)(s.state.sub_abonents),t)}))}},"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c")),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"sub-abonent"},"\u0421\u043f\u0438\u0441\u043e\u043a \u0441\u0443\u0431\u0430\u0431\u043e\u043d\u0435\u043d\u0442\u043e\u0432"),r.a.createElement("select",{multiple:!0,className:"form-control",id:"sub-abonent",ref:function(e){return n=e}},this.state.places.filter(function(e){return s.state.sub_abonents.includes(Number(e.id).toString())}).map(function(e){return r.a.createElement("option",{key:e.id,value:e.id},e.name)})),r.a.createElement("button",{className:"btn btn-danger btn-block",onClick:function(e){e.preventDefault();for(var t=[],a=n.options,r=0;r<a.length;r++)a[r].selected&&t.push(a[r].value);var c=s.state.sub_abonents.filter(function(e){return!t.includes(e)});s.setState(Object(l.a)({},s.state,{sub_abonents:Object(Se.a)(c)}))}},"\u0423\u0431\u0440\u0430\u0442\u044c")),this.state.processing?r.a.createElement(_,{message:"\u041e\u0431\u0440\u0430\u0431\u043e\u0442\u043a\u0430...",large:!0}):r.a.createElement("div",{className:"form-group"},r.a.createElement("button",{className:"btn btn-primary btn-block",onClick:function(t){t.preventDefault(),s.handleUpdateRegister(e.value,s.state.group_abonent_id,s.state.sub_abonents)}},"\u0421\u043e\u0437\u0434\u0430\u0442\u044c"))))))}}]),t}(n.Component),$e=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(u.a)(this,Object(d.a)(t).call(this,e))).handleClickYes=function(e){e.preventDefault();var t=a.state.user.token,n=a.state.register.id;j.deleteRegisterById(t,n).then(function(e){e&&e.done&&(a.props.showSuccessAlert("\u0420\u0435\u0435\u0441\u0442\u0440 \u0443\u0434\u0430\u043b\u0435\u043d"),a.props.history.go(-2))}).catch(function(e){var t=e.error;a.props.showWarningAlert(t.message)})},a.handleClickNo=function(e){e.preventDefault(),a.props.history.goBack()},a.state={user:e.user,register:{id:e.match.params.register_id},isLoaded:!1},a}return Object(h.a)(t,e),Object(m.a)(t,[{key:"componentDidMount",value:function(){var e=this,t=this.state.user.token,a=this.state.register.id;j.getRegisterById(t,a).then(function(t){t?e.setState(Object(l.a)({},e.state,{register:t,isLoaded:!0})):(e.props.showWarningAlert("\u0420\u0435\u0435\u0441\u0442\u0440 \u043d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d"),e.props.history.goBack())}).catch(function(t){var a=t.error;e.props.showWarningAlert(a.message),e.props.history.goBack()})}},{key:"render",value:function(){if(!this.state.isLoaded)return r.a.createElement(_,null);var e=this.state.register;return r.a.createElement("div",{className:"container pt-2"},r.a.createElement("div",{className:"border p-5"},r.a.createElement("div",{className:"mb-5"},r.a.createElement("p",{className:"h3 text-center"},"\u0423\u0434\u0430\u043b\u0438\u0442\u044c \u0440\u0435\u0435\u0441\u0442\u0440 ".concat(e.name,"?"))),r.a.createElement("div",{className:"d-flex justify-content-between"},r.a.createElement("div",{className:"ml-5"},r.a.createElement("button",{className:"btn btn-success",onClick:this.handleClickYes},"Yes")),r.a.createElement("div",{className:"mr-5"},r.a.createElement("button",{className:"btn btn-danger",onClick:this.handleClickNo},"No")))))}}]),t}(n.Component),et=function(e){var t=e.user,a=e.handlerLogout;return r.a.createElement("div",null,r.a.createElement("nav",{className:"navbar navbar-expand-lg navbar-dark bg-dark"},r.a.createElement("div",{className:"container"},r.a.createElement(y.a,{className:"navbar-brand",to:"/inspector/user"},r.a.createElement("span",null,t.login)," ",r.a.createElement("i",{className:"fas fa-user-secret"})),r.a.createElement("button",{className:"navbar-toggler",type:"button","data-toggle":"collapse","data-target":"#navbarNav","aria-controls":"navbarNav","aria-expanded":"false","aria-label":"Toggle navigation"},r.a.createElement("span",{className:"navbar-toggler-icon"})),r.a.createElement("div",{className:"collapse navbar-collapse",id:"navbarNav"},r.a.createElement("ul",{className:"navbar-nav"},r.a.createElement("li",{className:"nav-item"},r.a.createElement(y.a,{className:"nav-link",to:"/inspector/places"},"\u041c\u0435\u0441\u0442\u0430")),r.a.createElement("li",{className:"nav-item"},r.a.createElement(y.a,{className:"nav-link",to:"/inspector/reports"},"\u041e\u0442\u0447\u0435\u0442\u044b")),r.a.createElement("li",{className:"nav-item"},r.a.createElement(y.a,{className:"nav-link text-warning",to:"/logout",onClick:function(e){e.preventDefault(),a()}},"\u0412\u044b\u0445\u043e\u0434")))))))},tt=(a(50),function(e){return r.a.createElement("footer",{className:"footer bg-dark text-white py-2"},r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"row justify-content-center"},r.a.createElement("div",{className:"col-12 text-center"},r.a.createElement("span",{className:"text-muted"},r.a.createElement("a",{className:"text-muted",href:"http://instaservice.by"},"instaservice.by")," \xa9 2019")))))}),at=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(u.a)(this,Object(d.a)(t).call(this,e))).handlerCloseAlert=function(){a.setState(Object(l.a)({},a.state,{alert:null}))},a.setAlert=function(e,t){a.setState(Object(l.a)({},a.state,{alert:{type:e,message:t}}))},a.showWarningAlert=function(e){a.setState(Object(l.a)({},a.state,{alert:{type:"warning",message:e}}))},a.showSuccessAlert=function(e){a.setState(Object(l.a)({},a.state,{alert:{type:"success",message:e}}))},a.state={user:e.user,inspector:{},alert:null,isLoaded:!1},a}return Object(h.a)(t,e),Object(m.a)(t,[{key:"componentDidMount",value:function(){var e=this,t=this.state.user.token,a=this.state.user.id;j.getInspectorByUserId(t,a).then(function(t){t?e.setState(Object(l.a)({},e.state,{inspector:t,isLoaded:!0})):e.props.handlerLogout()}).catch(function(t){t.error;e.props.handlerLogout()})}},{key:"render",value:function(){var e=this;if(!this.state.isLoaded)return null;var t=this.state.user;return console.log("INSPECTOR",t),r.a.createElement("div",null,r.a.createElement(et,{user:t,handlerLogout:this.props.handlerLogout}),this.state.alert&&r.a.createElement(g,{type:this.state.alert.type,message:this.state.alert.message,handlerCloseAlert:this.handlerCloseAlert}),this.props.children&&r.a.Children.map(this.props.children,function(t){return r.a.cloneElement(t,{setAlert:e.setAlert,showWarningAlert:e.showWarningAlert,showSuccessAlert:e.showSuccessAlert,inspector:e.state.inspector})}),r.a.createElement(tt,null))}}]),t}(n.Component),nt=function(e){var t=e.user,a=e.inspector;return r.a.createElement("div",{className:"container justify-content-center"},r.a.createElement(k,e,r.a.createElement(y.a,{className:"nav-link",to:"/inspector/user/changePassword"},"\u0418\u0437\u043c\u0435\u043d\u0438\u0442\u044c \u043f\u0430\u0440\u043e\u043b\u044c")),r.a.createElement("h3",{className:"text-center mb-2"},"\u041f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044c"),r.a.createElement("div",{className:"border-top border-bottom"},r.a.createElement("div",null,r.a.createElement("span",{className:"font-weight-bold"},"\u041b\u043e\u0433\u0438\u043d")," : ",r.a.createElement("span",null,t.login)),r.a.createElement("div",null,r.a.createElement("span",{className:"font-weight-bold"},"\u0418\u043c\u044f")," : ",r.a.createElement("span",null,a.name))))},rt=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(u.a)(this,Object(d.a)(t).call(this,e))).loadItems=function(e){return Object(B.a)(I.a.mark(function t(){var n,r,s,c,o,i,m,u;return I.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,n=a.state,r=n.user.token,s=n.limit,c=a.state.inspector.id,t.next=5,j.act_01.count(r,c);case 5:if(!((o=t.sent)&&o.count>0)){t.next=14;break}return i=(e-1)*s,t.next=10,j.act_01.getAllByInspectorId(r,c,s,i);case 10:m=t.sent,a.setState(Object(l.a)({},a.state,{acts:m,totalItemsCount:o.count,activePage:e,isLoaded:!0})),t.next=15;break;case 14:a.setState(Object(l.a)({},a.state,{isLoaded:!0}));case 15:t.next=21;break;case 17:t.prev=17,t.t0=t.catch(0),u=t.t0.error,a.props.showWarningAlert(u.message);case 21:case"end":return t.stop()}},t,this,[[0,17]])}))},a.handlerChangePage=function(e){Promise.resolve().then(a.loadItems(e)).catch(function(e){var t=e.error;a.props.showWarningAlert(t.message)})},a.downloadPdf=function(e){return function(t){t.preventDefault();var n=a.state.user.token;j.act_01.getPdfById(n,e).catch(function(e){var t=e.error;a.props.setAlert("warning",t.message)})}},a.state={user:e.user,inspector:e.inspector,acts:[],limit:30,activePage:1,totalItemsCount:0,isLoaded:!1},a}return Object(h.a)(t,e),Object(m.a)(t,[{key:"componentDidMount",value:function(){var e=this;Promise.resolve().then(this.loadItems(this.state.activePage)).catch(function(t){var a=t.error;e.props.showWarningAlert(a.message)})}},{key:"render",value:function(){return this.state.isLoaded?r.a.createElement("div",{className:"container justify-content-center"},r.a.createElement(k,this.props),r.a.createElement(st,{items:this.state.acts,downloadPdf:this.downloadPdf}),this.state.totalItemsCount>this.state.limit?r.a.createElement(T.a,{hideDisabled:!0,activePage:this.state.activePage,itemsCountPerPage:this.state.limit,totalItemsCount:this.state.totalItemsCount,innerClass:"pagination justify-content-center",itemClass:"page-item",linkClass:"page-link",onChange:this.handlerChangePage}):null):null}}]),t}(n.Component),st=function(e){var t=e.items;return r.a.createElement("div",{className:"table-responsive"},r.a.createElement("table",{className:"table table-bordered table-hover table-sm table-responsive-sm"},r.a.createElement("thead",{className:"thead-dark"},r.a.createElement("tr",null,r.a.createElement("th",{scope:"col",className:"text-center"},"Id"),r.a.createElement("th",{scope:"col",className:"text-center"},"\u0414\u0430\u0442\u0430"),r.a.createElement("th",{scope:"col",className:"text-center"},"\u0418\u043d\u0441\u043f\u0435\u043a\u0442\u043e\u0440"),r.a.createElement("th",{scope:"col",className:"text-center"},"\u041c\u0435\u0441\u0442\u043e"),r.a.createElement("th",{scope:"col",className:"text-center"},"\u041f\u043e\u0442\u0440\u0435\u0431\u0438\u0442\u0435\u043b\u044c"),r.a.createElement("th",{scope:"col",className:"text-center"},"\u0421\u0447\u0435\u0442\u0447\u0438\u043a"),r.a.createElement("th",{scope:"col",className:"text-center"},"\u041f\u043e\u043a\u0430\u0437\u0430\u043d\u0438\u0435"),r.a.createElement("th",{scope:"col",className:"text-center"},r.a.createElement("i",{className:"fas fa-download"})))),r.a.createElement("tbody",{style:{fontSize:"0.85rem"}},t&&t.map(function(t){return r.a.createElement(ct,{key:"".concat(t.id),item:t,downloadPdf:e.downloadPdf})}))))},ct=function(e){var t=e.item;return r.a.createElement("tr",null,r.a.createElement("td",{className:"text-center"},r.a.createElement(y.a,{to:"/inspector/reports/".concat(t.id)},t.id)),r.a.createElement("td",{className:"text-center"},pe(he(t.date))),r.a.createElement("td",{className:"text-center"},t.inspector),r.a.createElement("td",{className:"text-center"},t.place),r.a.createElement("td",{className:"text-center"},t.consumer),r.a.createElement("td",{className:"text-center"},t.meter),r.a.createElement("td",{className:"text-center"},t.current_value),r.a.createElement("td",{className:"text-center"},r.a.createElement("a",{className:"text-secondary",onClick:e.downloadPdf(t.id),href:"api/v1/doc/act_01/".concat(t.id,"/pdf"),download:"act-".concat(Date.now(),".pdf")},r.a.createElement("i",{className:"fas fa-download"}))))},ot=rt,lt=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(u.a)(this,Object(d.a)(t).call(this,e))).downloadPdf=function(e){return function(t){t.preventDefault();var n=a.state.user.token;j.act_01.getPdfById(n,e).catch(function(e){var t=e.error;a.props.setAlert("warning",t.message)})}},a.state={user:e.user,act:{id:e.match.params.id},isLoaded:!1},a}return Object(h.a)(t,e),Object(m.a)(t,[{key:"componentDidMount",value:function(){var e=this,t=this.state.user.token,a=this.state.act.id;j.act_01.getById(t,a).then(function(t){t?e.setState(Object(l.a)({},e.state,{act:t,isLoaded:!0})):(e.props.showWarningAlert("\u041e\u0442\u0447\u0435\u0442 \u043d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d"),e.props.history.goBack())}).catch(function(t){t.error;e.props.showWarningAlert("\u041e\u0442\u0447\u0435\u0442 \u043d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d"),e.props.history.goBack()})}},{key:"render",value:function(){if(!this.state.isLoaded)return null;var e=this.state,t=e.user,a=e.act;return r.a.createElement("div",{className:"container"},r.a.createElement(k,Object.assign({},this.props,{user:t}),r.a.createElement(y.a,{className:"nav-link",to:"/inspector/reports/".concat(a.id,"/update")},"\u0418\u0437\u043c\u0435\u043d\u0438\u0442\u044c"),r.a.createElement(y.a,{className:"nav-link",to:"",onClick:this.downloadPdf(a.id)},"\u0421\u043a\u0430\u0447\u0430\u0442\u044c")),r.a.createElement("h3",{className:"text-center mb-2"},"\u041e\u0442\u0447\u0435\u0442 \u2116 ".concat(a.id)),r.a.createElement("div",{className:"table-responsive"},r.a.createElement("table",{className:"table table-hover table-sm border-bottom"},r.a.createElement("tbody",null,r.a.createElement("tr",null,r.a.createElement("td",null,r.a.createElement("span",{className:"font-weight-bold"},"Id")),r.a.createElement("td",null,r.a.createElement("span",{className:"font-weight-bold"},a.id))),r.a.createElement("tr",null,r.a.createElement("td",null,r.a.createElement("span",{className:"font-weight-bold"},"\u0414\u0430\u0442\u0430")),r.a.createElement("td",null,r.a.createElement("span",{className:"font-weight-bold"},pe(he(a.date))))),r.a.createElement("tr",null,r.a.createElement("td",null,r.a.createElement("span",{className:"font-weight-bold"},"\u0418\u043d\u0441\u043f\u0435\u043a\u0442\u043e\u0440")),r.a.createElement("td",null,r.a.createElement("span",{className:"font-weight-bold"},a.inspector))),r.a.createElement("tr",null,r.a.createElement("td",null,r.a.createElement("span",{className:"font-weight-bold"},"\u041f\u043e\u0442\u0440\u0435\u0431\u0438\u0442\u0435\u043b\u044c")),r.a.createElement("td",null,r.a.createElement("span",{className:"font-weight-bold"},a.consumer))),r.a.createElement("tr",null,r.a.createElement("td",null,r.a.createElement("span",{className:"font-weight-bold"},"\u041c\u0435\u0441\u0442\u043e")),r.a.createElement("td",null,r.a.createElement("span",{className:"font-weight-bold"},a.place))),r.a.createElement("tr",null,r.a.createElement("td",null,r.a.createElement("span",{className:"font-weight-bold"},"\u0421\u0447\u0435\u0442\u0447\u0438\u043a")),r.a.createElement("td",null,r.a.createElement("span",{className:"font-weight-bold"},a.meter))),r.a.createElement("tr",null,r.a.createElement("td",null,r.a.createElement("span",{className:"font-weight-bold"},"\u041f\u043e\u0434\u043f\u0438\u0441\u044c")),r.a.createElement("td",null,r.a.createElement("span",{className:"font-weight-bold"},a.ConsumerSingId?"\u0414\u0430":"\u041d\u0435\u0442"))),r.a.createElement("tr",{className:"table-success"},r.a.createElement("td",{colSpan:"2"},r.a.createElement("span",{className:"font-weight-bold"},"\u041f\u0440\u0435\u0434\u044b\u0434\u0443\u0449\u0438\u0435 \u043f\u043e\u043a\u0430\u0437\u0430\u043d\u0438\u044f:"))),r.a.createElement("tr",null,r.a.createElement("td",null,r.a.createElement("span",{className:"font-weight-bold"},"\u0414\u0430\u0442\u0430")),r.a.createElement("td",null,r.a.createElement("span",{className:"font-weight-bold"},a.last_date?pe(a.last_date):"---"))),r.a.createElement("tr",null,r.a.createElement("td",null,r.a.createElement("span",{className:"font-weight-bold"},"\u041f\u043e\u043a\u0430\u0437\u0430\u043d\u0438\u0435")),r.a.createElement("td",null,r.a.createElement("span",{className:"font-weight-bold"},null!==a.last_value?a.last_value:"---"))),r.a.createElement("tr",{className:"table-danger"},r.a.createElement("td",{colSpan:"2"},r.a.createElement("span",{className:"font-weight-bold"},"\u0422\u0435\u043a\u0443\u0449\u0438\u0435 \u043f\u043e\u043a\u0430\u0437\u0430\u043d\u0438\u044f:"))),r.a.createElement("tr",null,r.a.createElement("td",null,r.a.createElement("span",{className:"font-weight-bold"},"\u0414\u0430\u0442\u0430")),r.a.createElement("td",null,r.a.createElement("span",{className:"font-weight-bold"},a.current_date?pe(a.current_date):"---"))),r.a.createElement("tr",null,r.a.createElement("td",null,r.a.createElement("span",{className:"font-weight-bold"},"\u041f\u043e\u043a\u0430\u0437\u0430\u043d\u0438\u0435")),r.a.createElement("td",null,r.a.createElement("span",{className:"font-weight-bold"},null!==a.current_value?a.current_value:"---"))),r.a.createElement("tr",{className:"table-info"},r.a.createElement("td",null,r.a.createElement("span",{className:"font-weight-bold"},"\u0418\u0422\u041e\u0413\u041e \u043f\u043e\u0442\u0440\u0435\u0431\u043b\u0435\u043d\u0438\u0435")),r.a.createElement("td",null,r.a.createElement("span",{className:"font-weight-bold"},a.current_date&&a.last_date?a.current_value-a.last_value:a.current_date?a.current_value:null)))))))}}]),t}(n.Component),it=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(u.a)(this,Object(d.a)(t).call(this,e))).loadItems=function(e){return Object(B.a)(I.a.mark(function t(){var n,r,s,c,o,i;return I.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,a.setState(Object(l.a)({},a.state,{isLoaded:!1})),n=a.state,r=n.user.token,s=n.pageLimit,t.next=5,j.getCountPlaces(r);case 5:if(!((c=t.sent)&&c.count>0)){t.next=13;break}return t.next=9,j.getAllPlaces(r,s,(e-1)*s);case 9:o=t.sent,a.setState(Object(l.a)({},a.state,{places:o,totalItemsCount:c.count,activePage:e,isLoaded:!0})),t.next=14;break;case 13:a.setState(Object(l.a)({},a.state,{isLoaded:!0}));case 14:t.next=20;break;case 16:t.prev=16,t.t0=t.catch(0),i=t.t0.error,a.setState(Object(l.a)({},a.state,{isLoaded:!0}),function(){a.props.showWarningAlert(i.message)});case 20:case"end":return t.stop()}},t,this,[[0,16]])}))},a.handlerChangePage=function(e){Promise.resolve().then(a.loadItems(e)).catch(function(e){var t=e.error;a.props.showWarningAlert(t.message)})},a.state={user:e.user,places:[],pageLimit:30,activePage:1,totalItemsCount:0,isLoaded:!1},a}return Object(h.a)(t,e),Object(m.a)(t,[{key:"componentDidMount",value:function(){var e=this;Promise.resolve().then(this.loadItems(this.state.activePage)).catch(function(t){var a=t.error;e.props.showWarningAlert(a.message)})}},{key:"render",value:function(){return this.state.isLoaded?r.a.createElement("div",{className:"container justify-content-center"},r.a.createElement(k,this.props,r.a.createElement(y.a,{className:"nav-link",to:"/inspector/places/create"},"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c")),r.a.createElement(mt,{places:this.state.places}),this.state.totalItemsCount>this.state.pageLimit?r.a.createElement(T.a,{hideDisabled:!0,activePage:this.state.activePage,itemsCountPerPage:this.state.pageLimit,totalItemsCount:this.state.totalItemsCount,innerClass:"pagination justify-content-center",itemClass:"page-item",linkClass:"page-link",onChange:this.handlerChangePage}):null):null}}]),t}(n.Component),mt=function(e){var t=e.places;return r.a.createElement("div",{className:"table-responsive"},r.a.createElement("table",{className:"table table-bordered table-hover"},r.a.createElement("thead",{className:"thead-dark"},r.a.createElement("tr",null,r.a.createElement("th",{scope:"col",className:"text-center"},r.a.createElement("i",{className:"fas fa-plus"})),r.a.createElement("th",{scope:"col",className:"text-center"},"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435"),r.a.createElement("th",{scope:"col",className:"text-center"},"\u041f\u043e\u0442\u0440\u0435\u0431\u0438\u0442\u0435\u043b\u044c"),r.a.createElement("th",{scope:"col",className:"text-center"},"\u0421\u0447\u0435\u0442\u0447\u0438\u043a"))),r.a.createElement("tbody",{style:{fontSize:"1rem"}},t&&t.map(function(e){return r.a.createElement(ut,{key:"".concat(e.id,"-").concat(e.name),place:e})}))))},ut=function(e){var t=e.place;return r.a.createElement("tr",{style:dt(t)},r.a.createElement("td",{className:"text-center"},r.a.createElement(y.a,{to:"/inspector/places/".concat(t.id,"/addData")},r.a.createElement("i",{className:"text-secondary fas fa-plus"}))),r.a.createElement("td",{className:"text-center"},r.a.createElement(y.a,{to:"/inspector/places/".concat(t.id)},t.name)),r.a.createElement("td",{className:"text-center"},t.consumer?t.consumer.name:null),r.a.createElement("td",{className:"text-center"},t.meter?t.meter.number:null))},dt=function(e){if(!e.meter)return{backgroundColor:"#b0bec5"};if(e.meter){var t=e.meter.lastData;return t&&new Date(t.date).getMonth()===new Date(Date.now()).getMonth()?{backgroundColor:"#ffab91"}:{backgroundColor:"#c5e1a5"}}return null},ht=it,pt=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(u.a)(this,Object(d.a)(t).call(this,e))).state={user:e.user,place:{id:e.match.params.place_id},isLoaded:!1},a}return Object(h.a)(t,e),Object(m.a)(t,[{key:"componentDidMount",value:function(){var e=this,t=this.state.user.token,a=this.state.place.id;j.getPlaceById(t,a).then(function(t){t?e.setState(Object(l.a)({},e.state,{place:t,isLoaded:!0})):(e.props.showWarningAlert("\u041c\u0435\u0441\u0442\u043e \u043d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d\u043e"),e.props.history.goBack())},function(t){var a=t.error;e.props.showWarningAlert(a.message),e.props.history.goBack()})}},{key:"render",value:function(){if(!this.state.isLoaded)return null;var e=this.state.place;return r.a.createElement("div",{className:"container"},r.a.createElement(k,this.props,r.a.createElement(y.a,{className:"nav-link",to:"/inspector/places/".concat(e.id,"/update")},"\u0418\u0437\u043c\u0435\u043d\u0438\u0442\u044c"),r.a.createElement(y.a,{className:"nav-link",to:"/inspector/places/".concat(e.id,"/addData")},"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u043f\u043e\u043a\u0430\u0437\u0430\u043d\u0438\u044f")),r.a.createElement("h3",{className:"text-center mb-2"},"\u041c\u0435\u0441\u0442\u043e \u0443\u0441\u0442\u0430\u043d\u043e\u0432\u043a\u0438 \u0441\u0447\u0435\u0442\u0447\u0438\u043a\u0430"),r.a.createElement("div",{className:"table-responsive"},r.a.createElement("table",{className:"table table-hover table-sm border-bottom"},r.a.createElement("tbody",null,r.a.createElement("tr",null,r.a.createElement("td",null,r.a.createElement("span",{className:"font-weight-bold"},"Id")),r.a.createElement("td",null,r.a.createElement("span",{className:"font-weight-bold"},e.id))),r.a.createElement("tr",null,r.a.createElement("td",null,r.a.createElement("span",{className:"font-weight-bold"},"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435")),r.a.createElement("td",null,r.a.createElement("span",{className:"font-weight-bold"},e.name))),r.a.createElement("tr",null,r.a.createElement("td",null,r.a.createElement("span",{className:"font-weight-bold"},"\u041f\u043e\u0442\u0440\u0435\u0431\u0438\u0442\u0435\u043b\u044c")),r.a.createElement("td",null,r.a.createElement("span",{className:"font-weight-bold"},e.consumer?e.consumer.name:"---"))),r.a.createElement("tr",null,r.a.createElement("td",null,r.a.createElement("span",{className:"font-weight-bold"},"\u0422\u0435\u043b\u0435\u0444\u043e\u043d")),r.a.createElement("td",null,r.a.createElement("span",{className:"font-weight-bold"},e.consumer&&e.consumer.phone?r.a.createElement("a",{href:"tel:".concat(e.consumer.phone)},e.consumer.phone):"---"))),r.a.createElement("tr",null,r.a.createElement("td",null,r.a.createElement("span",{className:"font-weight-bold"},"\u0421\u0447\u0435\u0442\u0447\u0438\u043a")),r.a.createElement("td",null,r.a.createElement("span",{className:"font-weight-bold"},e.meter?e.meter.number:"---"))),r.a.createElement("tr",null,r.a.createElement("td",null,r.a.createElement("span",{className:"font-weight-bold"},"\u041f\u043e\u0434\u043f\u0438\u0441\u044c")),r.a.createElement("td",null,r.a.createElement("span",{className:"font-weight-bold"},e.isSignNeed?"\u0414\u0430":"\u041d\u0435\u0442"))),r.a.createElement("tr",null,r.a.createElement("td",{colSpan:"2"},r.a.createElement("span",{className:"font-weight-bold"},"\u041f\u043e\u0441\u043b\u0435\u0434\u043d\u0438\u0435 \u043f\u043e\u043a\u0430\u0437\u0430\u043d\u0438\u044f:"))),r.a.createElement("tr",null,r.a.createElement("td",null,r.a.createElement("span",{className:"font-weight-bold"},"\u0414\u0430\u0442\u0430")),r.a.createElement("td",null,r.a.createElement("span",{className:"font-weight-bold"},e.meter&&e.meter.lastData?pe(e.meter.lastData.date):"---"))),r.a.createElement("tr",null,r.a.createElement("td",null,r.a.createElement("span",{className:"font-weight-bold"},"\u041f\u043e\u043a\u0430\u0437\u0430\u043d\u0438\u0435")),r.a.createElement("td",null,r.a.createElement("span",{className:"font-weight-bold"},e.meter&&e.meter.lastData?e.meter.lastData.value:"---")))))))}}]),t}(n.Component),ft=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(u.a)(this,Object(d.a)(t).call(this,e))).dX=function(){return a.canvas.ref.current.getBoundingClientRect().left+window.scrollX},a.dY=function(){return a.canvas.ref.current.getBoundingClientRect().top+window.scrollY},a.handlerTouchStart=function(e){e.preventDefault();for(var t=document.getElementById("signCanvas").getContext("2d"),n=e.changedTouches,r=0;r<n.length;r++)a.ongoingTouches.push(a.copyTouch(n[r])),t.beginPath(),t.arc(n[r].pageX-a.dX(),n[r].pageY-a.dY(),a.brush.size/2,0,2*Math.PI,!1),t.fillStyle=a.brush.color,t.fill()},a.handlerTouchMove=function(e){e.preventDefault();for(var t=document.getElementById("signCanvas").getContext("2d"),n=e.changedTouches,r=0;r<n.length;r++){var s=a.ongoingTouchIndexById(n[r].identifier);s>=0?(t.beginPath(),t.moveTo(a.ongoingTouches[s].pageX-a.dX(),a.ongoingTouches[s].pageY-a.dY()),t.lineTo(n[r].pageX-a.dX(),n[r].pageY-a.dY()),t.lineWidth=a.brush.size,t.strokeStyle=a.brush.color,t.stroke(),a.ongoingTouches.splice(s,1,a.copyTouch(n[r]))):console.log("can't figure out which touch to continue")}},a.handlerTouchEnd=function(e){e.preventDefault();for(var t=document.getElementById("signCanvas").getContext("2d"),n=e.changedTouches,r=0;r<n.length;r++){var s=a.ongoingTouchIndexById(n[r].identifier);s>=0?(t.lineWidth=a.brush.size,t.fillStyle=a.brush.color,t.beginPath(),t.moveTo(a.ongoingTouches[s].pageX-a.dX(),a.ongoingTouches[s].pageY-a.dY()),t.lineTo(n[r].pageX-a.dX(),n[r].pageY-a.dY()),a.ongoingTouches.splice(s,1)):console.log("can't figure out which touch to end")}},a.handleCancel=function(e){e.preventDefault();for(var t=e.changedTouches,n=0;n<t.length;n++){var r=a.ongoingTouchIndexById(t[n].identifier);a.ongoingTouches.splice(r,1)}},a.copyTouch=function(e){return{identifier:e.identifier,pageX:e.pageX,pageY:e.pageY}},a.ongoingTouchIndexById=function(e){for(var t=0;t<a.ongoingTouches.length;t++){if(a.ongoingTouches[t].identifier===e)return t}return-1},a.handleClear=function(e){e.preventDefault(),a.canvas.ref.current.getContext("2d").clearRect(0,0,a.canvas.width,a.canvas.height)},a.touches={x:[],y:[]},a.brush={color:"black",size:3},a.snapshot=null,a.canvas={width:300,height:300,ref:r.a.createRef(),refHidden:r.a.createRef()},a.ongoingTouches=[],a}return Object(h.a)(t,e),Object(m.a)(t,[{key:"componentDidMount",value:function(){var e=this.canvas.ref.current;e.addEventListener("touchstart",this.handlerTouchStart,!1),e.addEventListener("touchmove",this.handlerTouchMove,!1),e.addEventListener("touchcancel",this.handleCancel,!1),e.addEventListener("touchend",this.handlerTouchEnd,!1)}},{key:"componentWillUnmount",value:function(){var e=this.canvas.ref.current;e.removeEventListener("touchstart",this.handlerTouchStart),e.removeEventListener("touchmove",this.handlerTouchMove),e.removeEventListener("touchcancel",this.handleCancel),e.removeEventListener("touchend",this.handlerTouchEnd)}},{key:"render",value:function(){return r.a.createElement("div",{className:"container justify-content-center"},r.a.createElement("div",{className:"border text-center mx-auto"},r.a.createElement("canvas",{id:"signCanvas",width:this.canvas.width,height:this.canvas.height,ref:this.canvas.ref}),r.a.createElement("canvas",{id:"signCanvas",width:this.canvas.width,height:this.canvas.height,ref:this.canvas.refHidden,style:{display:"none"}})),r.a.createElement("button",{className:"btn btn-warning btn-block",onClick:this.handleClear},"\u041e\u0447\u0438\u0441\u0442\u0438\u0442\u044c"))}}]),t}(n.Component),Et=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(u.a)(this,Object(d.a)(t).call(this,e))).handleCreateReport=function(){var e=Object(B.a)(I.a.mark(function e(t,n){var r,s,c,o,i,m,u,d,h,p,f;return I.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log(t),(r=a.state.place).meter){e.next=4;break}return e.abrupt("return",a.props.showWarningAlert("\u041e\u0442\u0441\u0443\u0442\u0441\u0442\u0432\u0443\u0435\u0442 \u0441\u0447\u0435\u0442\u0447\u0438\u043a"));case 4:if(!Number.isNaN(t)){e.next=6;break}return e.abrupt("return",a.props.showWarningAlert("\u041d\u0435\u043a\u043e\u0440\u0440\u0435\u043a\u0442\u043d\u044b\u0435 \u043f\u043e\u043a\u0430\u0437\u0430\u043d\u0438\u044f"));case 6:if(!(r.meter&&r.meter.lastData&&t<Number(r.meter.lastData.value))){e.next=8;break}return e.abrupt("return",a.props.showWarningAlert("\u041d\u0435\u043a\u043e\u0440\u0440\u0435\u043a\u0442\u043d\u044b\u0435 \u043f\u043e\u043a\u0430\u0437\u0430\u043d\u0438\u044f"));case 8:if(!a.state.place.isSignNeed||n){e.next=10;break}return e.abrupt("return",a.props.showWarningAlert("\u041e\u0442\u0441\u0443\u0442\u0441\u0442\u0432\u0443\u0435\u0442 \u043f\u043e\u0434\u043f\u0438\u0441\u044c"));case 10:if(s=a.state.user.token,c=a.state.inspector.name,o=a.state.place.name,i=a.state.place.consumer.name,m=a.state.place.meter.number,u=he(Date.now()),d=null,h=null,p=null,a.setState(Object(l.a)({},a.state,{isProcess:!0})),e.prev=20,!a.state.place.isSignNeed){e.next=26;break}return e.next=24,j.createSign(s,n);case 24:h=e.sent,d=h.id;case 26:return e.next=28,j.act_01.create(s,c,i,o,m,d,u,t);case 28:p=e.sent,e.next=37;break;case 31:return e.prev=31,e.t0=e.catch(20),f=e.t0.error,h&&j.deleteSignById(s,h.id).then(function(){}),a.setState(Object(l.a)({},a.state,{isProcess:!1}),function(){a.props.showWarningAlert(f.message)}),e.abrupt("return");case 37:p?(console.log(p),j.act_01.sendEmailById(s,p.id).then(function(e){a.setState(Object(l.a)({},a.state,{isProcess:!1}),function(){a.props.showSuccessAlert("\u041e\u0442\u0447\u0435\u0442 \u0441\u043e\u0437\u0434\u0430\u043d \u0438 \u043e\u0442\u043f\u0440\u0430\u0432\u043b\u0435\u043d."),a.props.history.goBack()})}).catch(function(e){var t=e.error;a.setState(Object(l.a)({},a.state,{isProcess:!1}),function(){a.props.showWarningAlert("\u041e\u0442\u0447\u0435\u0442 \u0441\u043e\u0437\u0434\u0430\u043d, \u043d\u043e \u043d\u0435 \u043e\u0442\u043f\u0440\u0430\u0432\u043b\u0435\u043d. \n"+t.message),a.props.history.goBack()})})):a.setState(Object(l.a)({},a.state,{isProcess:!1}),function(){a.props.showWarningAlert("\u041d\u0435\u0443\u0434\u0430\u043b\u043e\u0441\u044c \u0441\u043e\u0437\u0434\u0430\u0442\u044c \u043e\u0442\u0447\u0435\u0442")});case 38:case"end":return e.stop()}},e,this,[[20,31]])}));return function(t,a){return e.apply(this,arguments)}}(),a.state={user:e.user,inspector:e.inspector,place:{id:e.match.params.place_id},consumption:null,isLoaded:!1,isProcess:!1},a}return Object(h.a)(t,e),Object(m.a)(t,[{key:"componentDidMount",value:function(){var e=this,t=this.state.user.token,a=this.state.place.id;j.getPlaceById(t,a).then(function(t){t?e.setState(Object(l.a)({},e.state,{place:t,isLoaded:!0})):(e.props.showWarningAlert("\u041c\u0435\u0441\u0442\u043e \u043d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d\u043e"),e.props.history.goBack())},function(t){var a=t.error;e.props.showWarningAlert(a.message),e.props.history.goBack()})}},{key:"render",value:function(){var e,t,a=this;if(!this.state.isLoaded)return null;var n=this.state.place;return r.a.createElement("div",{className:"container"},r.a.createElement(k,this.props,r.a.createElement(y.a,{className:"nav-link",to:"/inspector/places/".concat(n.id,"/update")},"\u0418\u0437\u043c\u0435\u043d\u0438\u0442\u044c")),r.a.createElement("h3",{className:"text-center mb-2"},"\u041c\u0435\u0441\u0442\u043e \u0443\u0441\u0442\u0430\u043d\u043e\u0432\u043a\u0438 \u0441\u0447\u0435\u0442\u0447\u0438\u043a\u0430"),r.a.createElement("div",{className:"table-responsive"},r.a.createElement("table",{className:"table table-hover table-sm border-bottom"},r.a.createElement("tbody",null,r.a.createElement("tr",null,r.a.createElement("td",null,r.a.createElement("span",{className:"font-weight-bold"},"Id")),r.a.createElement("td",null,r.a.createElement("span",{className:"font-weight-bold"},n.id))),r.a.createElement("tr",null,r.a.createElement("td",null,r.a.createElement("span",{className:"font-weight-bold"},"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435")),r.a.createElement("td",null,r.a.createElement("span",{className:"font-weight-bold"},n.name))),r.a.createElement("tr",null,r.a.createElement("td",null,r.a.createElement("span",{className:"font-weight-bold"},"\u041f\u043e\u0442\u0440\u0435\u0431\u0438\u0442\u0435\u043b\u044c")),r.a.createElement("td",null,r.a.createElement("span",{className:"font-weight-bold"},n.consumer?n.consumer.name:"---"))),r.a.createElement("tr",null,r.a.createElement("td",null,r.a.createElement("span",{className:"font-weight-bold"},"\u0422\u0435\u043b\u0435\u0444\u043e\u043d")),r.a.createElement("td",null,r.a.createElement("span",{className:"font-weight-bold"},n.consumer&&n.consumer.phone?r.a.createElement("a",{href:"tel:".concat(n.consumer.phone)},n.consumer.phone):"---"))),r.a.createElement("tr",null,r.a.createElement("td",null,r.a.createElement("span",{className:"font-weight-bold"},"\u0421\u0447\u0435\u0442\u0447\u0438\u043a")),r.a.createElement("td",null,r.a.createElement("span",{className:"font-weight-bold"},n.meter?n.meter.number:"---"))),r.a.createElement("tr",null,r.a.createElement("td",null,r.a.createElement("span",{className:"font-weight-bold"},"\u041f\u043e\u0434\u043f\u0438\u0441\u044c")),r.a.createElement("td",null,r.a.createElement("span",{className:"font-weight-bold"},n.isSignNeed?"\u0414\u0430":"\u041d\u0435\u0442"))),r.a.createElement("tr",null,r.a.createElement("td",{colSpan:"2"},r.a.createElement("span",{className:"font-weight-bold"},"\u041f\u043e\u0441\u043b\u0435\u0434\u043d\u0438\u0435 \u043f\u043e\u043a\u0430\u0437\u0430\u043d\u0438\u044f:"))),r.a.createElement("tr",null,r.a.createElement("td",null,r.a.createElement("span",{className:"font-weight-bold"},"\u0414\u0430\u0442\u0430")),r.a.createElement("td",null,r.a.createElement("span",{className:"font-weight-bold"},n.meter&&n.meter.lastData?pe(n.meter.lastData.date):"---"))),r.a.createElement("tr",null,r.a.createElement("td",null,r.a.createElement("span",{className:"font-weight-bold"},"\u041f\u043e\u043a\u0430\u0437\u0430\u043d\u0438\u0435")),r.a.createElement("td",null,r.a.createElement("span",{className:"font-weight-bold"},n.meter&&n.meter.lastData?n.meter.lastData.value:"---"))),r.a.createElement("tr",null,r.a.createElement("td",{colSpan:"2"},r.a.createElement("div",{className:"form-group my-0 p-0"},r.a.createElement("input",{className:"form-control",type:"number",placeholder:"\u0422\u0435\u043a\u0443\u0449\u0438\u0435 \u043f\u043e\u043a\u0430\u0437\u0430\u043d\u0438\u044f",required:!0,ref:function(t){return e=t},onChange:function(t){var n=null;n=e.value<=0?null:a.state.place.meter?a.state.place.meter&&!a.state.place.meter.lastData?e.value:e.value-Number(a.state.place.meter.lastData.value):null,a.setState(Object(l.a)({},a.state,{consumption:n}))}})))),r.a.createElement("tr",{className:0===this.state.consumption?"table-warning":this.state.consumption>0?"table-success":"table-danger"},r.a.createElement("td",null,r.a.createElement("span",{className:"font-weight-bold"},"\u041f\u043e\u0442\u0440\u0435\u0431\u043b\u0435\u043d\u0438\u0435: ")),r.a.createElement("td",null,r.a.createElement("span",{className:"font-weight-bold text-right"},this.state.consumption)))))),n.isSignNeed&&r.a.createElement(r.a.Fragment,null,r.a.createElement("h5",{className:"text-center mb-2"},"\u041f\u043e\u0434\u043f\u0438\u0441\u044c \u043f\u043e\u0442\u0440\u0435\u0431\u0438\u0442\u0435\u043b\u044f"),r.a.createElement("div",{className:"row justify-content-center"},r.a.createElement("div",{className:"col-12 col-sm-12 col-md-8 col-md-offset-2 col-lg-6 col-lg-offset-3"},r.a.createElement("div",{className:"my-2"},r.a.createElement(ft,{ref:function(e){return t=e}}))))),r.a.createElement("div",{className:"row justify-content-center"},r.a.createElement("div",{className:"col-12 col-sm-12 col-md-8 col-md-offset-2 col-lg-6 col-lg-offset-3"},r.a.createElement("div",{className:"form-group"},this.state.isProcess?r.a.createElement(_,{message:"\u0421\u043e\u0437\u0434\u0430\u043d\u0438\u0435 \u043e\u0442\u0447\u0435\u0442\u0430...",large:!0}):r.a.createElement("button",{className:"btn btn-primary btn-block",onClick:function(n){if(n.preventDefault(),!a.state.place.isSignNeed)return a.handleCreateReport(e.value,null);var r=t.canvas.ref.current.toDataURL(),s=t.canvas.refHidden.current.toDataURL().length;if(r.length<=s)return a.props.showWarningAlert("\u041d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u0430 \u043f\u043e\u0434\u043f\u0438\u0441\u044c");var c=function(e){for(var t=atob(e.split(",")[1]),a=[],n=0;n<t.length;n++)a.push(t.charCodeAt(n));return new Blob([new Uint8Array(a)],{type:"image/png"})}(r);a.handleCreateReport(e.value,c)}},"\u0421\u043e\u0437\u0434\u0430\u0442\u044c")))))}}]),t}(n.Component),gt=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(u.a)(this,Object(d.a)(t).call(this,e))).handlerLogout=function(){a.props.history.index=-1,a.props.history.push("/login");var e={};Object.keys(a.state).forEach(function(t){e[t]=null}),a.setState(Object(l.a)({},e))},a.handlerlogin=function(e,t){e&&t?j.login(e,t).then(function(e){a.setState(Object(l.a)({},a.state,{user:e}),function(){switch(e.role){case"ADMIN":case"OWNER":a.props.history.push("/owner");break;case"INSPECTOR":a.props.history.push("/inspector");break;default:a.props.history.push("/login")}})}).catch(function(e){var t=e.error;a.setState(Object(l.a)({},a.state,{alert:{type:"warning",message:t.message}}))}):a.setState(Object(l.a)({},a.state,{alert:{type:"warning",message:"Incorrect login or password"}}))},a.handlerCloseAlert=function(){a.setState(Object(l.a)({},a.state,{alert:null}))},a.state={user:null,alert:null},a}return Object(h.a)(t,e),Object(m.a)(t,[{key:"componentDidMount",value:function(){}},{key:"render",value:function(){var e=this,t=this.state.user;return console.log("APP",t),r.a.createElement("div",null,r.a.createElement(p.a,null,r.a.createElement(f.a,{exact:!0,path:"/login",render:function(t){return r.a.createElement(b,Object.assign({},t,{alert:e.state.alert,handlerLogin:e.handlerlogin,handlerCloseAlert:e.handlerCloseAlert}))}}),r.a.createElement(f.a,{exact:!0,path:"/owner",render:function(a){return r.a.createElement(L,Object.assign({},a,{user:t,handlerLogout:e.handlerLogout}))}}),r.a.createElement(f.a,{exact:!0,path:"/inspector",render:function(a){return r.a.createElement(at,Object.assign({},a,{user:t,handlerLogout:e.handlerLogout}))}}),r.a.createElement(f.a,{exact:!0,path:"/inspector/user",render:function(a){return r.a.createElement(at,Object.assign({},a,{user:t,handlerLogout:e.handlerLogout}),r.a.createElement(nt,Object.assign({},a,{user:t})))}}),r.a.createElement(f.a,{exact:!0,path:"/inspector/user/changePassword",render:function(a){return r.a.createElement(at,Object.assign({},a,{user:t,handlerLogout:e.handlerLogout}),r.a.createElement(O,Object.assign({},a,{user:t})))}}),r.a.createElement(f.a,{exact:!0,path:"/inspector/places",render:function(a){return r.a.createElement(at,Object.assign({},a,{user:t,handlerLogout:e.handlerLogout}),r.a.createElement(ht,Object.assign({},a,{user:t})))}}),r.a.createElement(f.a,{exact:!0,path:"/inspector/places/create",render:function(a){return r.a.createElement(at,Object.assign({},a,{user:t,handlerLogout:e.handlerLogout}),r.a.createElement(Ae,Object.assign({},a,{user:t})))}}),r.a.createElement(f.a,{exact:!0,path:"/inspector/places/:place_id",render:function(a){return r.a.createElement(at,Object.assign({},a,{user:t,handlerLogout:e.handlerLogout}),r.a.createElement(pt,Object.assign({},a,{user:t})))}}),r.a.createElement(f.a,{exact:!0,path:"/inspector/places/:place_id/update",render:function(a){return r.a.createElement(at,Object.assign({},a,{user:t,handlerLogout:e.handlerLogout}),r.a.createElement(Pe,Object.assign({},a,{user:t})))}}),r.a.createElement(f.a,{exact:!0,path:"/inspector/places/:place_id/addData",render:function(a){return r.a.createElement(at,Object.assign({},a,{user:t,handlerLogout:e.handlerLogout}),r.a.createElement(Et,Object.assign({},a,{user:t})))}}),r.a.createElement(f.a,{exact:!0,path:"/inspector/reports",render:function(a){return r.a.createElement(at,Object.assign({},a,{user:t,handlerLogout:e.handlerLogout}),r.a.createElement(ot,Object.assign({},a,{user:t})))}}),r.a.createElement(f.a,{exact:!0,path:"/inspector/reports/:id",render:function(a){return r.a.createElement(at,Object.assign({},a,{user:t,handlerLogout:e.handlerLogout}),r.a.createElement(lt,Object.assign({},a,{user:t})))}}),r.a.createElement(f.a,{exact:!0,path:"/inspector/reports/:id/update",render:function(a){return r.a.createElement(at,Object.assign({},a,{user:t,handlerLogout:e.handlerLogout}),r.a.createElement(We,Object.assign({},a,{user:t})))}}),r.a.createElement(f.a,{exact:!0,path:"/owner/user",render:function(a){return r.a.createElement(L,Object.assign({},a,{user:t,handlerLogout:e.handlerLogout}),r.a.createElement(S,Object.assign({},a,{user:t})))}}),r.a.createElement(f.a,{exact:!0,path:"/owner/user/changePassword",render:function(a){return r.a.createElement(L,Object.assign({},a,{user:t,handlerLogout:e.handlerLogout}),r.a.createElement(O,Object.assign({},a,{user:t})))}}),r.a.createElement(f.a,{exact:!0,path:"/owner/inspectors",render:function(a){return r.a.createElement(L,Object.assign({},a,{user:t,handlerLogout:e.handlerLogout}),r.a.createElement(M,Object.assign({},a,{user:t})))}}),r.a.createElement(f.a,{exact:!0,path:"/owner/inspectors/create",render:function(a){return r.a.createElement(L,Object.assign({},a,{user:t,handlerLogout:e.handlerLogout}),r.a.createElement(G,Object.assign({},a,{user:t})))}}),r.a.createElement(f.a,{exact:!0,path:"/owner/inspectors/:inspector_id",render:function(a){return r.a.createElement(L,Object.assign({},a,{user:t,handlerLogout:e.handlerLogout}),r.a.createElement(Y,Object.assign({},a,{user:t})))}}),r.a.createElement(f.a,{exact:!0,path:"/owner/inspectors/:inspector_id/update",render:function(a){return r.a.createElement(L,Object.assign({},a,{user:t,handlerLogout:e.handlerLogout}),r.a.createElement(X,Object.assign({},a,{user:t})))}}),r.a.createElement(f.a,{exact:!0,path:"/owner/inspectors/:inspector_id/delete",render:function(a){return r.a.createElement(L,Object.assign({},a,{user:t,handlerLogout:e.handlerLogout}),r.a.createElement(q,Object.assign({},a,{user:t})))}}),r.a.createElement(f.a,{exact:!0,path:"/owner/consumers",render:function(a){return r.a.createElement(L,Object.assign({},a,{user:t,handlerLogout:e.handlerLogout}),r.a.createElement(V,Object.assign({},a,{user:t})))}}),r.a.createElement(f.a,{exact:!0,path:"/owner/consumers/create",render:function(a){return r.a.createElement(L,Object.assign({},a,{user:t,handlerLogout:e.handlerLogout}),r.a.createElement(Z,Object.assign({},a,{user:t})))}}),r.a.createElement(f.a,{exact:!0,path:"/owner/consumers/:consumer_id",render:function(a){return r.a.createElement(L,Object.assign({},a,{user:t,handlerLogout:e.handlerLogout}),r.a.createElement($,Object.assign({},a,{user:t})))}}),r.a.createElement(f.a,{exact:!0,path:"/owner/consumers/:consumer_id/update",render:function(a){return r.a.createElement(L,Object.assign({},a,{user:t,handlerLogout:e.handlerLogout}),r.a.createElement(ae,Object.assign({},a,{user:t})))}}),r.a.createElement(f.a,{exact:!0,path:"/owner/consumers/:consumer_id/delete",render:function(a){return r.a.createElement(L,Object.assign({},a,{user:t,handlerLogout:e.handlerLogout}),r.a.createElement(ne,Object.assign({},a,{user:t})))}}),r.a.createElement(f.a,{exact:!0,path:"/owner/meters",render:function(a){return r.a.createElement(L,Object.assign({},a,{user:t,handlerLogout:e.handlerLogout}),r.a.createElement(oe,Object.assign({},a,{user:t})))}}),r.a.createElement(f.a,{exact:!0,path:"/owner/meters/create",render:function(a){return r.a.createElement(L,Object.assign({},a,{user:t,handlerLogout:e.handlerLogout}),r.a.createElement(me,Object.assign({},a,{user:t})))}}),r.a.createElement(f.a,{exact:!0,path:"/owner/meters/:meter_id",render:function(a){return r.a.createElement(L,Object.assign({},a,{user:t,handlerLogout:e.handlerLogout}),r.a.createElement(be,Object.assign({},a,{user:t})))}}),r.a.createElement(f.a,{exact:!0,path:"/owner/meters/:meter_id/update",render:function(a){return r.a.createElement(L,Object.assign({},a,{user:t,handlerLogout:e.handlerLogout}),r.a.createElement(we,Object.assign({},a,{user:t})))}}),r.a.createElement(f.a,{exact:!0,path:"/owner/meters/:meter_id/delete",render:function(a){return r.a.createElement(L,Object.assign({},a,{user:t,handlerLogout:e.handlerLogout}),r.a.createElement(je,Object.assign({},a,{user:t})))}}),r.a.createElement(f.a,{exact:!0,path:"/owner/meters/:meter_id/addData",render:function(a){return r.a.createElement(L,Object.assign({},a,{user:t,handlerLogout:e.handlerLogout}),r.a.createElement(ye,Object.assign({},a,{user:t})))}}),r.a.createElement(f.a,{exact:!0,path:"/owner/reports",render:function(a){return r.a.createElement(L,Object.assign({},a,{user:t,handlerLogout:e.handlerLogout}),r.a.createElement(Te,Object.assign({},a,{user:t})))}}),r.a.createElement(f.a,{exact:!0,path:"/owner/reports/:id",render:function(a){return r.a.createElement(L,Object.assign({},a,{user:t,handlerLogout:e.handlerLogout}),r.a.createElement(De,Object.assign({},a,{user:t})))}}),r.a.createElement(f.a,{exact:!0,path:"/owner/reports/:id/update",render:function(a){return r.a.createElement(L,Object.assign({},a,{user:t,handlerLogout:e.handlerLogout}),r.a.createElement(We,Object.assign({},a,{user:t})))}}),r.a.createElement(f.a,{exact:!0,path:"/owner/reports/:id/delete",render:function(a){return r.a.createElement(L,Object.assign({},a,{user:t,handlerLogout:e.handlerLogout}),r.a.createElement(ze,Object.assign({},a,{user:t})))}}),r.a.createElement(f.a,{exact:!0,path:"/owner/places",render:function(a){return r.a.createElement(L,Object.assign({},a,{user:t,handlerLogout:e.handlerLogout}),r.a.createElement(xe,Object.assign({},a,{user:t})))}}),r.a.createElement(f.a,{exact:!0,path:"/owner/places/create",render:function(a){return r.a.createElement(L,Object.assign({},a,{user:t,handlerLogout:e.handlerLogout}),r.a.createElement(Ae,Object.assign({},a,{user:t})))}}),r.a.createElement(f.a,{exact:!0,path:"/owner/places/:place_id",render:function(a){return r.a.createElement(L,Object.assign({},a,{user:t,handlerLogout:e.handlerLogout}),r.a.createElement(Le,Object.assign({},a,{user:t})))}}),r.a.createElement(f.a,{exact:!0,path:"/owner/places/:place_id/update",render:function(a){return r.a.createElement(L,Object.assign({},a,{user:t,handlerLogout:e.handlerLogout}),r.a.createElement(Pe,Object.assign({},a,{user:t})))}}),r.a.createElement(f.a,{exact:!0,path:"/owner/places/:place_id/delete",render:function(a){return r.a.createElement(L,Object.assign({},a,{user:t,handlerLogout:e.handlerLogout}),r.a.createElement(Ie,Object.assign({},a,{user:t})))}}),r.a.createElement(f.a,{exact:!0,path:"/owner/registers",render:function(a){return r.a.createElement(L,Object.assign({},a,{user:t,handlerLogout:e.handlerLogout}),r.a.createElement(Xe,Object.assign({},a,{user:t})))}}),r.a.createElement(f.a,{exact:!0,path:"/owner/registers/create",render:function(a){return r.a.createElement(L,Object.assign({},a,{user:t,handlerLogout:e.handlerLogout}),r.a.createElement(qe,Object.assign({},a,{user:t})))}}),r.a.createElement(f.a,{exact:!0,path:"/owner/registers/:register_id",render:function(a){return r.a.createElement(L,Object.assign({},a,{user:t,handlerLogout:e.handlerLogout}),r.a.createElement(Qe,Object.assign({},a,{user:t})))}}),r.a.createElement(f.a,{exact:!0,path:"/owner/registers/:register_id/update",render:function(a){return r.a.createElement(L,Object.assign({},a,{user:t,handlerLogout:e.handlerLogout}),r.a.createElement(Ze,Object.assign({},a,{user:t})))}}),r.a.createElement(f.a,{exact:!0,path:"/owner/registers/:register_id/delete",render:function(a){return r.a.createElement(L,Object.assign({},a,{user:t,handlerLogout:e.handlerLogout}),r.a.createElement($e,Object.assign({},a,{user:t})))}}),r.a.createElement(f.a,{render:function(t){return r.a.createElement(b,Object.assign({},t,{alert:e.state.alert,handlerLogin:e.handlerlogin,handlerCloseAlert:e.handlerCloseAlert}))}})))}}]),t}(n.Component),bt=Object(E.a)(gt);c.a.render(r.a.createElement(o.a,null,r.a.createElement(bt,null)),document.getElementById("root"))}},[[28,2,1]]]);
//# sourceMappingURL=main.fcebe078.chunk.js.map